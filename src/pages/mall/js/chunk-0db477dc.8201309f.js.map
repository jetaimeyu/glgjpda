{"version":3,"sources":["webpack:///./src/views/integralDetail.vue?dbb9","webpack:///src/views/integralDetail.vue","webpack:///./src/views/integralDetail.vue?37fa","webpack:///./src/views/integralDetail.vue?f58a","webpack:///./src/views/integralDetail.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_integralDetail_vue_vue_type_style_index_0_id_38877ba3_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_integralDetail_vue_vue_type_style_index_0_id_38877ba3_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","name","mixins","_components_Back_js__WEBPACK_IMPORTED_MODULE_6__","data","count","isLoading","list","loading","finished","page","pageSize","time","showno","mounted","this","refreshDom","computed","Object","_Users_mac_Desktop_Plugin_shop_node_modules_babel_runtime_helpers_builtin_es6_objectSpread__WEBPACK_IMPORTED_MODULE_1__","vuex__WEBPACK_IMPORTED_MODULE_5__","methods","onRefresh","getUserIntegralDetail","onLoad","_this","$toast","mask","message","axios","get","concat","COMP_ID","then","res","console","log","State","Data","DataRows","length","_this$list","push","apply","_Users_mac_Desktop_Plugin_shop_node_modules_babel_runtime_helpers_builtin_es6_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","setTimeout","clear","catch","e","_this2","headerH","document","getElementsByClassName","clientHeight","viewH","window","screen","height","clearTimeout","getElementById","style","listH","offsetHeight","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","fixed","left-arrow","on","click-left","$event","$router","back","ref","refresh","model","value","callback","$$v","expression","id","offset","load","directives","rawName","_v","_l","item","key","ID","class","IntegralType","SourceName","Integral","label","UseDate","staticRenderFns","views_integralDetailvue_type_script_lang_js_","integralDetailvue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-0db477dc.8201309f.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./integralDetail.vue?vue&type=style&index=0&id=38877ba3&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./integralDetail.vue?vue&type=style&index=0&id=38877ba3&scoped=true&lang=scss&\"","<template>\n  <div class=\"integral-detail\">\n    <van-nav-bar title=\"积分明细\" :fixed=\"true\" left-arrow @click-left=\"$router.back()\"/>\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\" ref=\"refresh\">\n      <van-list id=\"integral-detail-list\" ref=\"list\" :loading=\"loading\" :finished=\"finished\" :offset=\"30\"\n                @load=\"onLoad\">\n        <div class=\"no-list\" v-show=\"list.length === 0 && showno\">\n          暂无积分记录\n        </div>\n        <van-cell :title=\"item.SourceName\"\n                  :value=\"item.IntegralType === 1?'+'+item.Integral+'积分':'-'+item.Integral+'积分'\"\n                  :label=\"item.UseDate\" v-for=\"item in list\" :key=\"item.ID\"\n                  :class=\"item.IntegralType === 1?'green':'red'\"/>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\n  import {mapGetters} from \"vuex\";\n  import Back from \"../components/Back.js\";\n\n  export default {\n    name: \"integralDetail\",\n    mixins: [Back],\n    data() {\n      return {\n        count: 0,\n        isLoading: false,\n        list: [],\n        loading: false,\n        finished: false,\n        page: 1,\n        pageSize: 10,\n        time: \"\",\n        showno: false\n      };\n    },\n    mounted() {\n      this.refreshDom();\n    },\n    computed: {\n      ...mapGetters([\"COMP_ID\"])\n    },\n    methods: {\n      onRefresh() {\n        this.page = 1;\n        this.getUserIntegralDetail();\n        this.page++;\n      },\n      onLoad() {\n        if (this.page > 2) {\n          this.loading = true;\n        }\n        this.getUserIntegralDetail();\n        this.page++;\n      },\n      getUserIntegralDetail() {\n        this.$toast.loading({\n          mask: true,\n          message: \"加载中...\"\n        });\n        axios\n          .get(\n            `/api/v1/Reg/GetIntegralDetail?compId=${this.COMP_ID}&page=${\n              this.page\n              }&pageSize=${this.pageSize}`\n          )\n          .then(res => {\n            this.showno = true\n            console.log(res.data);\n            if (res.data.State === 1 && res.data.Data.DataRows.length !== 0) {\n              if (this.page === 2) {\n                this.list = res.data.Data.DataRows;\n              } else {\n                this.list.push(...res.data.Data.DataRows);\n              }\n              this.finished = false;\n            } else if (res.data.Data.DataRows.length < 10) {\n              this.finished = true;\n            }\n\n            this.refreshDom();\n            setTimeout(() => {\n              this.loading = false;\n              this.isLoading = false;\n              this.$toast.clear();\n            }, 200);\n          })\n          .catch(e => {\n            this.showno = true\n            this.$toast.clear();\n            this.$toast(\"网络出现了问题\");\n            this.finished = true;\n            this.isLoading = false;\n            console.log(\"error:\" + e);\n          });\n      },\n      refreshDom() {\n        let headerH = document.getElementsByClassName(\"van-nav-bar\")[0]\n          .clientHeight;\n        let viewH = window.screen.height;\n        clearTimeout(this.time);\n        document.getElementById(\"integral-detail-list\").style.height = \"\";\n        this.time = setTimeout(() => {\n          let listH = document.getElementById(\"integral-detail-list\")\n            .offsetHeight;\n          if (listH < viewH - headerH) {\n            document.getElementById(\"integral-detail-list\").style.height =\n              viewH - headerH + \"px\";\n            if (this.page === 2) {\n              this.onLoad();\n            }\n          } else {\n            document.getElementById(\"integral-detail-list\").style.height = \"\";\n          }\n        }, 50);\n      }\n    }\n  };\n</script>\n\n<style scoped lang=\"scss\">\n  .integral-detail {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    width: 100%;\n    background-color: #f4f4f4;\n    z-index: 502;\n    overflow: scroll;\n    .no-list {\n      padding-top: 100px;\n      text-align: center;\n      color: #333;\n      font-weight: 300;\n    }\n    .van-pull-refresh {\n      margin-top: 2.875rem;\n    }\n    /deep/ .van-cell__value {\n    }\n    /deep/ .van-cell__label {\n      color: #ccc;\n    }\n    /deep/ .van-cell:not(:last-child)::after {\n      border-bottom-width: 1.5px;\n    }\n    .red {\n      /deep/ .van-cell__value {\n        color: red;\n      }\n    }\n    .green {\n      /deep/ .van-cell__value {\n        color: green;\n      }\n    }\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"integral-detail\"},[_c('van-nav-bar',{attrs:{\"title\":\"积分明细\",\"fixed\":true,\"left-arrow\":\"\"},on:{\"click-left\":function($event){_vm.$router.back()}}}),_c('van-pull-refresh',{ref:\"refresh\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{ref:\"list\",attrs:{\"id\":\"integral-detail-list\",\"loading\":_vm.loading,\"finished\":_vm.finished,\"offset\":30},on:{\"load\":_vm.onLoad}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.list.length === 0 && _vm.showno),expression:\"list.length === 0 && showno\"}],staticClass:\"no-list\"},[_vm._v(\"\\n        暂无积分记录\\n      \")]),_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.ID,class:item.IntegralType === 1?'green':'red',attrs:{\"title\":item.SourceName,\"value\":item.IntegralType === 1?'+'+item.Integral+'积分':'-'+item.Integral+'积分',\"label\":item.UseDate}})})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./integralDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./integralDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./integralDetail.vue?vue&type=template&id=38877ba3&scoped=true&\"\nimport script from \"./integralDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./integralDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./integralDetail.vue?vue&type=style&index=0&id=38877ba3&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38877ba3\",\n  null\n  \n)\n\ncomponent.options.__file = \"integralDetail.vue\"\nexport default component.exports"],"sourceRoot":""}