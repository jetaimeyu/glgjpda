(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db477dc"],{"190e":function(e,t,a){},"1e00":function(e,t,a){"use strict";var i=a("190e"),n=a.n(i);n.a},"743c":function(e,t,a){"use strict";(function(e){var i=a("8afe"),n=a("c93e"),s=(a("cadf"),a("551c"),a("097d"),a("2f62")),o=a("5f4d");t["a"]={name:"integralDetail",mixins:[o["a"]],data:function(){return{count:0,isLoading:!1,list:[],loading:!1,finished:!1,page:1,pageSize:10,time:"",showno:!1}},mounted:function(){this.refreshDom()},computed:Object(n["a"])({},Object(s["b"])(["COMP_ID"])),methods:{onRefresh:function(){this.page=1,this.getUserIntegralDetail(),this.page++},onLoad:function(){this.page>2&&(this.loading=!0),this.getUserIntegralDetail(),this.page++},getUserIntegralDetail:function(){var t=this;this.$toast.loading({mask:!0,message:"加载中..."}),e.get("/api/v1/Reg/GetIntegralDetail?compId=".concat(this.COMP_ID,"&page=").concat(this.page,"&pageSize=").concat(this.pageSize)).then(function(e){if(t.showno=!0,console.log(e.data),1===e.data.State&&0!==e.data.Data.DataRows.length){var a;if(2===t.page)t.list=e.data.Data.DataRows;else(a=t.list).push.apply(a,Object(i["a"])(e.data.Data.DataRows));t.finished=!1}else e.data.Data.DataRows.length<10&&(t.finished=!0);t.refreshDom(),setTimeout(function(){t.loading=!1,t.isLoading=!1,t.$toast.clear()},200)}).catch(function(e){t.showno=!0,t.$toast.clear(),t.$toast("网络出现了问题"),t.finished=!0,t.isLoading=!1,console.log("error:"+e)})},refreshDom:function(){var e=this,t=document.getElementsByClassName("van-nav-bar")[0].clientHeight,a=window.screen.height;clearTimeout(this.time),document.getElementById("integral-detail-list").style.height="",this.time=setTimeout(function(){var i=document.getElementById("integral-detail-list").offsetHeight;i<a-t?(document.getElementById("integral-detail-list").style.height=a-t+"px",2===e.page&&e.onLoad()):document.getElementById("integral-detail-list").style.height=""},50)}}}}).call(this,a("bc3a"))},"79b9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"integral-detail"},[a("van-nav-bar",{attrs:{title:"积分明细",fixed:!0,"left-arrow":""},on:{"click-left":function(t){e.$router.back()}}}),a("van-pull-refresh",{ref:"refresh",on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("van-list",{ref:"list",attrs:{id:"integral-detail-list",loading:e.loading,finished:e.finished,offset:30},on:{load:e.onLoad}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.list.length&&e.showno,expression:"list.length === 0 && showno"}],staticClass:"no-list"},[e._v("\n        暂无积分记录\n      ")]),e._l(e.list,function(e){return a("van-cell",{key:e.ID,class:1===e.IntegralType?"green":"red",attrs:{title:e.SourceName,value:1===e.IntegralType?"+"+e.Integral+"积分":"-"+e.Integral+"积分",label:e.UseDate}})})],2)],1)],1)},n=[],s=a("743c"),o=s["a"],l=(a("1e00"),a("2877")),r=Object(l["a"])(o,i,n,!1,null,"38877ba3",null);r.options.__file="integralDetail.vue";t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-0db477dc.8201309f.js.map