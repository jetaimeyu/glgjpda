{"version":3,"sources":["webpack:///./src/views/forRecord.vue?a64e","webpack:///./src/views/forRecord.vue?0012","webpack:///./src/views/forRecord.vue","webpack:///src/views/forRecord.vue","webpack:///./src/views/forRecord.vue?bc1e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","left-text","fixed","left-arrow","on","click-left","handleToHome","ref","refresh","onRefresh","model","value","callback","$$v","isLoading","expression","id","finished","offset","load","onLoad","loading","list","length","showno","_v","_e","_l","item","key","ID","SpendIntegral","label","CreateDate","slot","_s","ExchangeProdName","staticRenderFns","views_forRecordvue_type_script_lang_js_","forRecordvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","name","data","count","page","pageSize","time","computed","_Users_mac_Desktop_Plugin_shop_node_modules_babel_runtime_helpers_builtin_es6_objectSpread__WEBPACK_IMPORTED_MODULE_1__","vuex__WEBPACK_IMPORTED_MODULE_5__","methods","getRecord","_this","$toast","mask","message","axios","get","concat","COMP_ID","then","res","console","log","State","Data","DataRows","_this$list","push","apply","_Users_mac_Desktop_Plugin_shop_node_modules_babel_runtime_helpers_builtin_es6_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","refreshDom","setTimeout","clear","catch","e","_this2","headerH","document","getElementsByClassName","clientHeight","viewH","window","screen","height","clearTimeout","getElementById","style","listH","offsetHeight","$router","path","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_forRecord_vue_vue_type_style_index_0_id_56c8e44b_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_forRecord_vue_vue_type_style_index_0_id_56c8e44b_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"8IAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,eAAoBG,OAAOC,MAAA,OAAAC,YAAA,GAAAC,OAAA,EAAAC,aAAA,IAA2DC,IAAKC,aAAAb,EAAAc,gBAA+BV,EAAA,oBAAyBW,IAAA,UAAAH,IAAkBI,QAAAhB,EAAAiB,WAAwBC,OAAQC,MAAAnB,EAAA,UAAAoB,SAAA,SAAAC,GAA+CrB,EAAAsB,UAAAD,GAAkBE,WAAA,eAAyBnB,EAAA,YAAiBW,IAAA,OAAAR,OAAkBiB,GAAA,kBAAAC,SAAAzB,EAAAyB,SAAAC,OAAA,IAA2Dd,IAAKe,KAAA3B,EAAA4B,QAAkBV,OAAQC,MAAAnB,EAAA,QAAAoB,SAAA,SAAAC,GAA6CrB,EAAA6B,QAAAR,GAAgBE,WAAA,aAAuB,IAAAvB,EAAA8B,KAAAC,QAAA/B,EAAAgC,OAAA5B,EAAA,OAAkDE,YAAA,YAAsBN,EAAAiC,GAAA,8BAAAjC,EAAAkC,KAAAlC,EAAAmC,GAAAnC,EAAA,cAAAoC,GAAiF,OAAAhC,EAAA,YAAsBiC,IAAAD,EAAAE,GAAA/B,OAAmBY,MAAA,IAAAiB,EAAAG,cAAA,KAAAC,MAAAJ,EAAAK,cAA6DrC,EAAA,YAAiBsC,KAAA,UAAatC,EAAA,OAAAA,EAAA,QAAuBE,YAAA,kBAA4BN,EAAAiC,GAAAjC,EAAA2C,GAAAP,EAAAQ,kBAAA,OAAAxC,EAAA,WAAAJ,EAAAiC,GAAA,cAAA7B,EAAA,OAA2FE,YAAA,eAAyBN,EAAAiC,GAAA,iBAAAjC,EAAA2C,GAAAP,EAAAK,YAAA,2BAA0E,YACjoCI,iBCDmVC,EAAAC,EAAA,6BCQnVC,EAAgBC,OAAAC,EAAA,KAAAD,CACdH,EACA/C,EACA8C,GACF,EACA,KACA,WACA,MAIAG,EAAAG,QAAAC,OAAA,gBACeC,EAAA,WAAAL,kICOfK,EAAA,MACAC,KAAA,YACAC,KAFA,WAGA,OACAC,MAAA,EACAlC,WAAA,EACAQ,QACAD,SAAA,EACAJ,UAAA,EACAgC,KAAA,EACAC,SAAA,GACAC,KAAA,GACA3B,QAAA,IAGA4B,SAAYX,OAAAY,EAAA,KAAAZ,IACZA,OAAAa,EAAA,KAAAb,EAAA,aAEAc,SACA9C,UADA,WAEAhB,KAAAwD,KAAA,EACAxD,KAAA+D,YACA/D,KAAAwD,QAEA7B,OANA,WAOA3B,KAAAwD,KAAA,IACAxD,KAAA4B,SAAA,GAEA5B,KAAA+D,YACA/D,KAAAwD,QAEAO,UAbA,WAaA,IAAAC,EAAAhE,KACAA,KAAAiE,OAAArC,SACAsC,MAAA,EACAC,QAAA,WAEAC,EACAC,IADA,4CAAAC,OAGAtE,KAAAuE,QAHA,4BAAAD,OAIAtE,KAAAwD,KAJA,cAAAc,OAIAtE,KAAAyD,WAEAe,KAAA,SAAAC,GAGA,GAFAT,EAAAjC,QAAA,EACA2C,QAAAC,IAAAF,EAAAnB,MACA,IAAAmB,EAAAnB,KAAAsB,OAAA,IAAAH,EAAAnB,KAAAuB,KAAAC,SAAAhD,OAAA,CAGA,IAAAiD,EAFA,OAAAf,EAAAR,KACAQ,EAAAnC,KAAA4C,EAAAnB,KAAAuB,KAAAC,cAEAC,EAAAf,EAAAnC,MAAAmD,KAAAC,MAAAF,EAAA/B,OAAAkC,EAAA,KAAAlC,CAAAyB,EAAAnB,KAAAuB,KAAAC,WAEAd,EAAAxC,UAAA,OAEAwC,EAAAxC,UAAA,EAEAwC,EAAAmB,aACAC,WAAA,WACApB,EAAApC,SAAA,EACAoC,EAAA3C,WAAA,EACA2C,EAAAC,OAAAoB,SACA,OAEAC,MAAA,SAAAC,GACAvB,EAAAjC,QAAA,EACAiC,EAAAC,OAAAoB,QACArB,EAAAC,OAAA,WACAD,EAAAxC,UAAA,EACAwC,EAAApC,SAAA,EACAoC,EAAA3C,WAAA,EACAqD,QAAAC,IAAA,SAAAY,MAGAJ,WAtDA,WAsDA,IAAAK,EAAAxF,KACAyF,EAAAC,SAAAC,uBAAA,kBACAC,aACAC,EAAAC,OAAAC,OAAAC,OACAC,aAAAjG,KAAA0D,MACAgC,SAAAQ,eAAA,mBAAAC,MAAAH,OAAA,GACAhG,KAAA0D,KAAA0B,WAAA,WACA,IAAAgB,EAAAV,SAAAQ,eAAA,mBAAAG,aACAD,EAAAP,EAAAJ,GACAC,SAAAQ,eAAA,mBAAAC,MAAAH,OACAH,EAAAJ,EAAA,KACA,IAAAD,EAAAhC,MACAgC,EAAA7D,UAGA+D,SAAAQ,eAAA,mBAAAC,MAAAH,OAAA,IAEA,KAEAnF,aAzEA,WA0EAb,KAAAsG,QAAAtB,MAAAuB,KAAA,sFCvHA,IAAAC,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAqiBE,EAAG","file":"js/chunk-65e6880c.98f7545a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"for-record\"},[_c('van-nav-bar',{attrs:{\"title\":\"兑换记录\",\"left-text\":\"\",\"fixed\":true,\"left-arrow\":\"\"},on:{\"click-left\":_vm.handleToHome}}),_c('van-pull-refresh',{ref:\"refresh\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{ref:\"list\",attrs:{\"id\":\"for-record-list\",\"finished\":_vm.finished,\"offset\":50},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[(_vm.list.length === 0 && _vm.showno)?_c('div',{staticClass:\"no-list\"},[_vm._v(\"\\n        暂无兑换记录\\n      \")]):_vm._e(),_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.ID,attrs:{\"value\":'-'+item.SpendIntegral+'积分',\"label\":item.CreateDate}},[_c('template',{slot:\"title\"},[_c('div',[_c('span',{staticClass:\"van-cell-text\"},[_vm._v(_vm._s(item.ExchangeProdName)+\" \")]),_c('van-tag',[_vm._v(\"商城兑换\")])],1),_c('div',{staticClass:\"cell-label\"},[_vm._v(\"\\n            \"+_vm._s(item.CreateDate)+\"\\n          \")])])],2)})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forRecord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./forRecord.vue?vue&type=template&id=56c8e44b&scoped=true&\"\nimport script from \"./forRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./forRecord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./forRecord.vue?vue&type=style&index=0&id=56c8e44b&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56c8e44b\",\n  null\n  \n)\n\ncomponent.options.__file = \"forRecord.vue\"\nexport default component.exports","<template>\n  <div class=\"for-record\">\n    <van-nav-bar title=\"兑换记录\" left-text=\"\" :fixed=\"true\" left-arrow @click-left=\"handleToHome\"/>\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\" ref=\"refresh\">\n      <van-list id=\"for-record-list\" ref=\"list\" v-model=\"loading\" :finished=\"finished\" @load=\"onLoad\" :offset=\"50\">\n        <div class=\"no-list\" v-if=\"list.length === 0 && showno\">\n          暂无兑换记录\n        </div>\n        <van-cell :value=\"'-'+item.SpendIntegral+'积分'\" :label=\"item.CreateDate\" v-for=\"item in list\" :key=\"item.ID\">\n          <template slot=\"title\">\n            <div>\n              <span class=\"van-cell-text\">{{item.ExchangeProdName}} </span>\n              <van-tag>商城兑换</van-tag>\n            </div>\n            <div class=\"cell-label\">\n              {{item.CreateDate}}\n            </div>\n          </template>\n        </van-cell>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"forRecord\",\n  data() {\n    return {\n      count: 0,\n      isLoading: false,\n      list: [],\n      loading: false,\n      finished: false,\n      page: 1,\n      pageSize: 10,\n      time: \"\",\n      showno:false\n    };\n  },\n  computed: {\n    ...mapGetters([\"COMP_ID\"])\n  },\n  methods: {\n    onRefresh() {\n      this.page = 1;\n      this.getRecord();\n      this.page++;\n    },\n    onLoad() {\n      if (this.page > 2) {\n        this.loading = true;\n      }\n      this.getRecord();\n      this.page++;\n    },\n    getRecord() {\n      this.$toast.loading({\n        mask: true,\n        message: \"加载中...\"\n      });\n      axios\n        .get(\n          `/api/v1/Reg/ExchangeProdRecordGet?compId=${\n            this.COMP_ID\n          }&logisticsState=-1&page=${this.page}&pageSize=${this.pageSize}`\n        )\n        .then(res => {\n          this.showno = true\n          console.log(res.data);\n          if (res.data.State === 1 && res.data.Data.DataRows.length !== 0) {\n            if (this.page === 2) {\n              this.list = res.data.Data.DataRows;\n            } else {\n              this.list.push(...res.data.Data.DataRows);\n            }\n            this.finished = false;\n          } else {\n            this.finished = true;\n          }\n          this.refreshDom();\n          setTimeout(() => {\n            this.loading = false;\n            this.isLoading = false;\n            this.$toast.clear();\n          }, 200);\n        })\n        .catch(e => {\n          this.showno = true\n          this.$toast.clear();\n          this.$toast(\"网络出现了问题\");\n          this.finished = true;\n          this.loading = false;\n          this.isLoading = false;\n          console.log(\"error:\" + e);\n        });\n    },\n    refreshDom() {\n      let headerH = document.getElementsByClassName(\"van-nav-bar\")[0]\n        .clientHeight;\n      let viewH = window.screen.height;\n      clearTimeout(this.time);\n      document.getElementById(\"for-record-list\").style.height = \"\";\n      this.time = setTimeout(() => {\n        let listH = document.getElementById(\"for-record-list\").offsetHeight;\n        if (listH < viewH - headerH) {\n          document.getElementById(\"for-record-list\").style.height =\n            viewH - headerH + \"px\";\n          if (this.page === 2) {\n            this.onLoad();\n          }\n        } else {\n          document.getElementById(\"for-record-list\").style.height = \"\";\n        }\n      }, 50);\n    },\n    handleToHome() {\n      this.$router.push({ path: \"/home/enterpriseHome\" });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.for-record {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  overflow: scroll;\n  background-color: #f4f4f4;\n  /deep/ .no-list{\n    padding-top: 100px;\n    text-align: center;\n    color: #333;\n    font-weight: 300;\n  }\n  .van-pull-refresh {\n    margin-top: 2.875rem;\n  }\n  /deep/ .van-cell:not(:last-child)::after {\n    border-bottom-width: 1.5px;\n  }\n\n  /deep/ .van-cell__label {\n    color: #ccc;\n  }\n  /deep/ .van-cell__value {\n    color: red;\n  }\n  /deep/ .van-tag {\n    background-color: #ff9842;\n  }\n  .cell-label {\n    color: #ccc;\n  }\n  /deep/ .van-cell__title{\n    width: 280px;\n    padding-right: 10px;\n  }\n  /deep/ .van-cell__value{\n    flex:inherit;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forRecord.vue?vue&type=style&index=0&id=56c8e44b&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forRecord.vue?vue&type=style&index=0&id=56c8e44b&scoped=true&lang=scss&\""],"sourceRoot":""}