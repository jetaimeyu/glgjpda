webpackJsonp([2],{WxDe:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("Z624");var a=o("aenU"),s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"choose-client"},[o("x-header",{attrs:{title:"选择产品","left-options":{preventGoBack:!0}},on:{"on-click-back":t.goBack}}),t._v(" "),o("div",{ref:"content",staticClass:"content"},[o("scroll",{directives:[{name:"show",rawName:"v-show",value:0!=t.commonList.length,expression:"commonList.length !=0"}],ref:"scroll",attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData()},pullingDown:function(e){t.getData(1)}}},[o("checklist",{attrs:{title:"请选择产品",options:t.commonList},on:{"on-change":t.change},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}})],1),t._v(" "),o("no-data",{directives:[{name:"show",rawName:"v-show",value:0==t.commonList.length,expression:"commonList.length == 0"}]}),t._v(" "),o("div",{staticClass:"footer"},[o("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var n=function(t){o("atoR")},r=o("VU/8")(a.a,s,!1,n,"data-v-4cb39920",null);e.default=r.exports},Z624:function(t,e,o){"use strict";(function(t){var e=o("Gu7T"),a=o.n(e),s=o("Dd8w"),n=o.n(s),r=o("ABCa"),c=o("etVR"),i=o("2sLL"),l=o("cq2Q"),u=o("NYxO"),h=o("F4+m"),f=o("8pLc"),d=o("cq2Q");h.a,l.a,r.a,c.a,i.a,f.a,d.a,n()({},Object(u.e)(["chooseProductData"])),n()({},Object(u.d)(["setChooseProduct"]),{goBack:function(){this.refresh("changeOrder",!1),this.$router.back()},change:function(){},GetCompCustomerList:function(){var e=this;t.get("/CrmProd/GetPagedCrmProd?page="+this.page+"&count="+this.count).then(function(t){if(e.loading=!1,e.$nextTick().then(function(){e.$refs.scroll.reSize()}),1===t.data.State){var o;if(1===e.page)e.commonList=[],e.list=t.data.Data.List,t.data.Data.List.forEach(function(t){e.commonList.push({value:t.ProdName,key:t.ID})}),e.$refs.scroll.scroll.finishPullDown();else(o=e.list).push.apply(o,a()(t.data.Data.List)),t.data.Data.List.forEach(function(t){e.commonList.push({value:t.ProdName,key:t.ID})}),e.$refs.scroll.scroll.finishPullUp();e.radioValue=[],0!==e.chooseProductData.length&&e.chooseProductData.forEach(function(t){e.radioValue.push(t.ID)}),e.$refs.scroll.forceUpdate(),e.$refs.scroll.refresh()}else e.$refs.scroll.scroll.finishPullDown(),e.$refs.scroll.forceUpdate(),e.$vux.toast.show({text:t.data.ErrorMessage,type:"warn"})}).catch(function(t){console.log(t),e.$refs.scroll.scroll.finishPullDown(),e.$refs.scroll.forceUpdate(),e.loading=!1,e.$vux.toast.show({text:"网络异常",type:"cancel"})})},confirm:function(){var t=this,e=[];(this.radioValue.forEach(function(o,a){t.list.forEach(function(a,s){o===a.ID&&(t.$set(t.list[s],"DealNum",1),t.$set(t.list[s],"Remark",""),t.$set(t.list[s],"DealPrice",a.ProdPrice),e.push(a))})}),0!=e.length||0==this.list.length)?(this.$store.state.chooseProductData.forEach(function(t){e.forEach(function(o,a){t.ID==o.ID&&(e[a].DealNum=t.DealNum)})}),this.setChooseProduct(e),this.refresh("changeOrder",!1),this.$router.back()):this.$vux.toast.show({text:"请选择产品",type:"warn"})},getData:function(t){console.log(1),1===t?this.page=1:this.page++,this.GetCompCustomerList()}})}).call(e,o("mtWM"))},aenU:function(t,e,o){"use strict";(function(t){var a=o("Gu7T"),s=o.n(a),n=o("Dd8w"),r=o.n(n),c=o("ABCa"),i=o("etVR"),l=o("2sLL"),u=o("cq2Q"),h=o("NYxO"),f=o("F4+m"),d=o("8pLc"),p=o("cq2Q");e.a={name:"chooseProduct",mixins:[f.a],components:{ScrollAll:u.a,XHeader:c.a,Checklist:i.a,XButton:l.a,NoData:d.a,Scroll:p.a},data:function(){return{commonList:[],radioValue:[],list:[],page:1,count:20,pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},loading:!1}},computed:r()({},Object(h.e)(["chooseProductData"])),mounted:function(){var t=this;this.loading=!0,this.GetCompCustomerList(),this.$refs.content.addEventListener("scroll",function(e){e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<50&&(t.page++,t.loading||(t.loading=!0),t.GetCompCustomerList())})},methods:r()({},Object(h.d)(["setChooseProduct"]),{goBack:function(){this.refresh("changeOrder",!1),this.$router.back()},change:function(){},GetCompCustomerList:function(){var e=this;t.get("/CrmProd/GetPagedCrmProd?page="+this.page+"&count="+this.count).then(function(t){if(e.loading=!1,e.$nextTick().then(function(){e.$refs.scroll.reSize()}),1===t.data.State){var o;if(1===e.page)e.commonList=[],e.list=t.data.Data.List,t.data.Data.List.forEach(function(t){e.commonList.push({value:t.ProdName,key:t.ID})}),e.$refs.scroll.scroll.finishPullDown();else(o=e.list).push.apply(o,s()(t.data.Data.List)),t.data.Data.List.forEach(function(t){e.commonList.push({value:t.ProdName,key:t.ID})}),e.$refs.scroll.scroll.finishPullUp();e.radioValue=[],0!==e.chooseProductData.length&&e.chooseProductData.forEach(function(t){e.radioValue.push(t.ID)}),e.$refs.scroll.forceUpdate(),e.$refs.scroll.refresh()}else e.$refs.scroll.scroll.finishPullDown(),e.$refs.scroll.forceUpdate(),e.$vux.toast.show({text:t.data.ErrorMessage,type:"warn"})}).catch(function(t){console.log(t),e.$refs.scroll.scroll.finishPullDown(),e.$refs.scroll.forceUpdate(),e.loading=!1,e.$vux.toast.show({text:"网络异常",type:"cancel"})})},confirm:function(){var t=this,e=[];(this.radioValue.forEach(function(o,a){t.list.forEach(function(a,s){o===a.ID&&(t.$set(t.list[s],"DealNum",1),t.$set(t.list[s],"Remark",""),t.$set(t.list[s],"DealPrice",a.ProdPrice),e.push(a))})}),0!=e.length||0==this.list.length)?(this.$store.state.chooseProductData.forEach(function(t){e.forEach(function(o,a){t.ID==o.ID&&(e[a].DealNum=t.DealNum)})}),this.setChooseProduct(e),this.refresh("changeOrder",!1),this.$router.back()):this.$vux.toast.show({text:"请选择产品",type:"warn"})},getData:function(t){console.log(1),1===t?this.page=1:this.page++,this.GetCompCustomerList()}})}}).call(e,o("mtWM"))},atoR:function(t,e){}});
//# sourceMappingURL=2.9c50f7fba765f059f132.js.map