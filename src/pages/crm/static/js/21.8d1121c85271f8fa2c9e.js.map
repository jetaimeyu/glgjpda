{"version":3,"sources":["webpack:///./src/components/AddTask/TaskForm/template.vue","webpack:///./src/components/AddTask/TaskForm/template.vue?746e","webpack:///./src/components/AddTask/TaskForm/template.vue?7a0e","webpack:///./src/components/AddTask/template.vue","webpack:///./src/components/AddTask/template.vue?c0ae","webpack:///./src/components/AddTask/template.vue?c262"],"names":["Number","Object","group","cell","datetime","x_textarea","popup_picker","template","client_link","data","formObj","Executors","Senders","TaskType","CustomerID","LinkUserID","BeginDate","dayjs_min_default","format","TaskContent","TaskPriority","prity","exeShow","senShow","exeList","senList","taskPriority","CurRule","defCurObj","CustomerName","ids","id2","props","ovoIndex","type","curObj","watch","newType","this","components","Group","Cell","Datetime","XTextarea","PopupPicker","UserSelect","ClientLink","computed","exeStr","map","item","OrgName","join","senStr","methods","toSelectCur","$router","push","path","toSelectExecutor","toSelectSender","saveExe","userList","length","val","UserID","ID","Name","Exe","IsDelete","$vux","toast","show","text","saveSen","Sen","init","cId","cName","cLink","priChange","dayuan","unProority","mounted","components_AddTask_TaskForm_template","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","isSelect","workRu","_v","model","value","callback","$$v","$set","expression","slot","max","placeholder","show-counter","trim","is-link","nativeOn","click","$event","title","on","on-change","defaultUser","close","save","staticRenderFns","src_components_AddTask_TaskForm_template","__webpack_require__","normalizeComponent","AddTask_TaskForm_template","ssrContext","components_AddTask_template","x_header","tab","tab_item","x_button","components_confirm","extends_default","vuex_esm","tabTxt","saveObj","workID","createUser","addShow","XHeader","Tab","TabItem","AddForm","XButton","Confirm","tabLeft","addDialog","back","tabRight","cur","$refs","taskForm","client","getData","assign_default","formRules","selectTaskType","index","console","log","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","date","timestamp","wrap","_context","prev","next","abrupt","substring","replace","Date","getTime","saveWork","sent","getWorkInfo","newMessage","stop","obj","_this2","Axios","post","then","res","Data","$bus","emit","_this3","arr","concat","toConsumableArray_default","forEach","CurrentUserID","splice","send","userID","dataID","msg","SendUsers","EvName","ImgPath","down","Title","Content","Params","api50","catch","err","id","_this4","get","CreateUserName","beforeRouteLeave","to","from","_this5","fullPath","meta","keepAlive","plus","key","removeEventListener","addEventListener","e","vm","_this6","error","selectortype_template_index_0_src_components_AddTask_template","left-options","backText","preventGoBack","on-click-back","$route","query","_e","_l","selected","on-item-click","_s","staticStyle","position","bottom","width","content","on-cancel","on-confirm","template_Component","template_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/21.8d1121c85271f8fa2c9e.js","sourcesContent":["\nimport Group from 'vux/src/components/group/index.vue'\nimport Cell from 'vux/src/components/cell/index.vue'\nimport Datetime from 'vux/src/components/datetime/index.vue'\nimport XTextarea from 'vux/src/components/x-textarea/index.vue'\nimport PopupPicker from 'vux/src/components/popup-picker/index.vue'\n\nimport { mapGetters } from \"vuex\";\nimport UserSelect from \"../../User/template\";\nimport dayuan from \"../../../common/js/dayuan.js\";\nimport ClientLink from \"@/components/client/client_link\";\nimport dayjs from \"dayjs\";\nexport default {\ndata() {\nreturn {\nformObj: {\nExecutors: [],\nSenders: [],\nTaskType: 1,\nCustomerID: 0,\nLinkUserID: 0,\nBeginDate: dayjs().format(\"YYYY-MM-DD HH:mm\"),\nTaskContent: \"\",\nTaskPriority: 1\n},\nprity: [[\"低\", \"中\", \"高\"]],\nexeShow: false,\nsenShow: false,\nexeList: [],\nsenList: [],\ntaskPriority: [\"低\"],\nCurRule: true,\ndefCurObj: {\nCustomerID: 0,\nCustomerName: \"\",\nLinkUserID: 0\n},\nids: [],\nid2: []\n};\n},\nprops: {\novoIndex: {\ntype: Number\n},\ncurObj: {\ntype: Object\n}\n},\nwatch: {\novoIndex(newType) {\nthis.formObj.TaskType = newType + 1;\nthis.CurRule = newType === 0 ? true : false;\n}\n},\ncomponents: {\nGroup,\nCell,\nDatetime,\nXTextarea,\nPopupPicker,\nUserSelect,\nClientLink\n},\ncomputed: {\nexeStr() {\nlet arr = this.exeList.map(item => item.OrgName);\nreturn arr.join(\",\");\n},\nsenStr() {\nlet arr = this.senList.map(item => item.OrgName);\nreturn arr.join(\",\");\n}\n},\nmethods: {\ntoSelectCur() {\nthis.$router.push({ path: \"/selectCust\" });\n},\ntoSelectExecutor() {\nthis.exeShow = true;\n},\ntoSelectSender() {\nthis.senShow = true;\n},\nsaveExe(userList) {\nif (userList.length) {\nthis.exeList = userList;\nthis.ids = userList.map(val => {\nreturn {\nUserID: val.ID,\nName: val.OrgName\n};\n});\nthis.exeShow = false;\nlet Exe = userList.map(val => {\nreturn {\nIsDelete: 0,\nID: 0,\nUserID: val.ID\n};\n});\nthis.formObj.Executors = Exe;\n} else {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请选择执行人\"\n});\n}\n},\nsaveSen(userList) {\nif (userList.length) {\nthis.senList = userList;\nthis.senShow = false;\nthis.id2 = userList.map(val => {\nreturn {\nUserID: val.ID,\nName: val.OrgName\n};\n});\nlet Sen = userList.map(val => {\nreturn {\nIsDelete: 0,\nID: 0,\nUserID: val.ID\n};\n});\nthis.formObj.Senders = Sen;\n} else {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请选择抄送人\"\n});\n}\n},\ninit() {\nthis.exeList = [];\nthis.senList = [];\nif (this.curObj.cId) {\nthis.defCurObj[\"CustomerID\"] = this.curObj.cId;\nthis.defCurObj[\"CustomerName\"] = this.curObj.cName;\nthis.defCurObj[\"LinkUserID\"] = this.curObj.cLink;\n}\n},\npriChange() {\nthis.formObj.TaskPriority = dayuan.unProority(this.taskPriority[0]);\n}\n},\nmounted() {\nthis.init();\n}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/AddTask/TaskForm/template.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task-form\"},[_c('Group',[_c('ClientLink',{ref:\"client\",attrs:{\"isSelect\":_vm.curObj.cId?false:true,\"workRu\":_vm.CurRule,\"path\":\"/AddTask/selectCust\",\"data\":_vm.defCurObj}}),_vm._v(\" \"),_c('datetime',{attrs:{\"format\":\"YYYY-MM-DD HH:mm\"},model:{value:(_vm.formObj.BeginDate),callback:function ($$v) {_vm.$set(_vm.formObj, \"BeginDate\", $$v)},expression:\"formObj.BeginDate\"}},[_c('div',{staticClass:\"label\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"form-label\"},[_vm._v(\"*\")]),_vm._v(\"执行时间\\n      \")])]),_vm._v(\" \"),_c('x-textarea',{attrs:{\"max\":300,\"placeholder\":\"请输入任务内容...\",\"show-counter\":false},model:{value:(_vm.formObj.TaskContent),callback:function ($$v) {_vm.$set(_vm.formObj, \"TaskContent\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formObj.TaskContent\"}},[_c('div',{staticClass:\"label\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('span',{staticClass:\"form-label\"},[_vm._v(\"*\")])])]),_vm._v(\" \"),_c('cell',{attrs:{\"is-link\":\"\",\"value\":_vm.exeStr},nativeOn:{\"click\":function($event){return _vm.toSelectExecutor($event)}}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"执行人(留空表示自己)\")])])]),_vm._v(\" \"),_c('cell',{attrs:{\"title\":\"抄送人\",\"is-link\":\"\",\"value\":_vm.senStr},nativeOn:{\"click\":function($event){return _vm.toSelectSender($event)}}}),_vm._v(\" \"),_c('popup-picker',{attrs:{\"data\":_vm.prity},on:{\"on-change\":_vm.priChange},model:{value:(_vm.taskPriority),callback:function ($$v) {_vm.taskPriority=$$v},expression:\"taskPriority\"}},[_c('div',{staticClass:\"label\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"form-label\"},[_vm._v(\"*\")]),_vm._v(\"优先级\\n      \")])])],1),_vm._v(\" \"),_c('UserSelect',{ref:\"userExe\",attrs:{\"title\":\"选择执行人\",\"show\":_vm.exeShow,\"defaultUser\":_vm.ids},on:{\"close\":function($event){_vm.exeShow=false},\"save\":_vm.saveExe}}),_vm._v(\" \"),_c('UserSelect',{ref:\"userSen\",attrs:{\"title\":\"选择抄送人\",\"show\":_vm.senShow,\"defaultUser\":_vm.id2},on:{\"close\":function($event){_vm.senShow=false},\"save\":_vm.saveSen}}),_vm._v(\" \"),_c('div',[_c('router-view',{staticClass:\"selectCust\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2204943a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AddTask/TaskForm/template.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2204943a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./template.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2204943a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./template.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2204943a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AddTask/TaskForm/template.vue\n// module id = null\n// module chunks = ","\nimport { mapState } from \"vuex\";\nimport XHeader from 'vux/src/components/x-header/index.vue'\nimport Tab from 'vux/src/components/tab/tab.vue'\nimport TabItem from 'vux/src/components/tab/tab-item.vue'\nimport XButton from 'vux/src/components/x-button/index.vue'\n\nimport Confirm from 'vux/src/components/confirm/index.vue'\n\nimport AddForm from \"./TaskForm/template\";\nexport default {\ndata() {\nreturn {\ntabTxt: [\"客户跟进任务\", \"普通任务\"],\novoIndex: 0,\nsaveObj: {},\nworkID: null,\ncreateUser: null,\naddShow: false\n};\n},\ncomponents: {\nXHeader,\nTab,\nTabItem,\nAddForm,\nXButton,\nConfirm\n},\ncomputed: {\n...mapState([\"CurrentUserID\"])\n},\nmethods: {\ntabLeft() {\nthis.addShow = true;\n},\naddDialog() {\nthis.$router.back();\n},\ntabRight() {\nlet cur = this.$refs.taskForm.$refs.client.getData();\nthis.saveObj = Object.assign({}, this.$refs.taskForm.formObj);\nthis.saveObj.CustomerID = cur.CustomerID;\nthis.saveObj.LinkUserID = cur.LinkUserID;\nthis.saveObj.BeginDate += \":00\";\nthis.formRules();\n},\nselectTaskType(index) {\nconsole.log(index);\nthis.ovoIndex = index;\n},\nasync formRules() {\n\nif (this.ovoIndex === 0) {\nif (!this.saveObj.CustomerID || !this.saveObj.LinkUserID) {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请选择客户跟联系人\"\n});\nreturn false;\n}\n}\n\nlet date = this.saveObj.BeginDate;\ndate = date.substring(0, 19);\ndate = date.replace(/-/g, \"/\");\nvar timestamp = new Date(date).getTime();\nif (this.saveObj.BeginDate === \":00\") {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请选择执行时间\"\n});\nreturn false;\n} else {\nif (new Date() > timestamp) {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"执行时间不能小于当前时间\"\n});\nreturn false;\n}\n}\n\nif (!this.saveObj.TaskContent) {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请输入任务内容\"\n});\nreturn false;\n} else {\nif (this.saveObj.TaskContent.length < 5) {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"任务内容应在5-200之间\"\n});\nreturn false;\n}\n}\n\nif (!this.saveObj.TaskPriority) {\nthis.$vux.toast.show({\ntype: \"warn\",\ntext: \"请选择任务优先级\"\n});\nreturn false;\n}\nlet sav = await this.saveWork(this.saveObj);\nlet work = await this.getWorkInfo(this.workID);\nthis.newMessage();\nthis.$router.back();\n},\nsaveWork(obj) {\nreturn this.Axios.post(`/CrmTask/SaveCrmTask`, obj).then(res => {\nthis.$vux.toast.show({\ntext: \"保存成功\"\n});\nthis.workID = res.data.Data;\nthis.$bus.emit(\"onSave\", true);\n});\n},\nnewMessage() {\nlet arr = [...this.saveObj.Executors, ...this.saveObj.Senders].map(\nval => val.UserID\n);\narr.forEach((val, index) => {\nif (val === this.CurrentUserID) {\narr.splice(index, 1);\n}\n});\nthis.send(arr, this.workID);\n\n\n\n},\nsend(userID, dataID) {\nlet msg = {\nSendUsers: userID,\nEvName: \"crm-task\",\nImgPath: `${down}/mdtcrm/CRMTask.jpg`,\nTitle: `您有一条新的待办任务`,\nContent: `${this.saveObj.TaskContent}`,\nParams: [dataID]\n};\nthis.Axios.post(`${api50}/api/v1/Common/SendSingleEventMsg`, msg)\n.then(res => {})\n.catch(err => {\nconsole.log(err, 90);\n});\n},\ngetWorkInfo(id) {\nreturn this.Axios.get(`/CrmTask/GetCrmTaskInfoByID/${id}`).then(res => {\nthis.createUser = res.data.Data.CreateUserName;\n});\n}\n},\nbeforeRouteLeave(to, from, next) {\nif (to.fullPath === \"/TaskWork\") {\nto.meta.keepAlive = true;\n}\ntry {\nplus.key.removeEventListener(\"backbutton\", () => {});\nplus.key.addEventListener(\"backbutton\", () => {\nthis.$router.back();\n});\n} catch (e) {}\n\nnext(vm => {});\n},\nmounted() {\ntry {\nplus.key.removeEventListener(\"backbutton\", () => {});\nplus.key.addEventListener(\"backbutton\", () => {\nthis.addShow = true;\n});\n} catch (error) {}\n}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/AddTask/template.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-task\"},[_c('div',{staticClass:\"header\"},[_c('x-header',{attrs:{\"left-options\":{backText: '',preventGoBack:true}},on:{\"on-click-back\":_vm.tabLeft}},[_vm._v(\"新建待办任务\\n      \")])],1),_vm._v(\" \"),(!_vm.$route.query.cId)?_c('div',{staticClass:\"abs-ddd\"},[_c('tab',_vm._l((_vm.tabTxt),function(item,index){return _c('tab-item',{key:index,attrs:{\"selected\":index===0},on:{\"on-item-click\":function($event){_vm.selectTaskType(index)}}},[_vm._v(_vm._s(item))])}))],1):_vm._e(),_vm._v(\" \"),_c('AddForm',{ref:\"taskForm\",attrs:{\"ovoIndex\":_vm.ovoIndex,\"curObj\":_vm.$route.query}}),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"fixed\",\"bottom\":\"0\",\"width\":\"100%\"}},[_c('x-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.tabRight($event)}}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('Confirm',{attrs:{\"title\":\"继续退出？\",\"content\":\"您已编辑过，退出将丢失这些内容！\"},on:{\"on-cancel\":function($event){_vm.addShow=false},\"on-confirm\":_vm.addDialog},model:{value:(_vm.addShow),callback:function ($$v) {_vm.addShow=$$v},expression:\"addShow\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-480b185e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AddTask/template.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-480b185e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./template.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-480b185e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./template.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-480b185e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AddTask/template.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}