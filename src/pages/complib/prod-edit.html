<!doctype html>
<html id="MdTong">

<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" href="../../css/mui.min.css">
	<link rel="stylesheet" href="../../css/common.css">
	<link rel="stylesheet" href="../../icon-font/iconfont.css">
	<style>
		/*列表栅格样式*/
			
			.mui-grid-view.mui-grid-9 {
				border: 0;
				background: #fff;
			}
			
			.mui-grid-view.mui-grid-9 .mui-table-view-cell {
				border: 0;
			}
			
			.mui-grid-view.mui-grid-9 .mui-media {
				color: #323223;
			}
			
			.mui-table-view-cell:after {
				height: 0px;
			}
			
			.mui-grid-view.mui-grid-9 .mui-table-view-cell {
				padding-left: 15px!important;
			}
			
			.mui-grid-view.mui-grid-9 .mui-table-view-cell {
				padding: 0px;
			}
			
			.mui-table-view-cell {
				padding: 0px;
			}
			
			.mui-col-xs-6.mui-col-sm-6 {
				margin-left: 16px;
			}
			
			.mui-table-view-cell {
				text-align: center;
				border: 1px solid #EAEAEA;
				padding: 2px 0px;
			}
			/*差号*/
			
			.icon-close {
				color: red;
				padding: 3px;
			}
			
			.equplus {
				padding: 5px 10px 5px 0px;
				color: #007AFF;
				background: #fff;
				font-size: 1.4rem;
			}
			
			.data-group .opt-left {
				position: absolute;
				padding: 10px 10px 11px 16px!important;
				left: 0px;
				color: #5F9EDF!important;
				max-width: 50px!important;
			}
			
			.input-key {
				float: left;
				width: 47%!important;
				margin-left: 0;
				line-height: 25px!important;
			}
			
			.input-value {
				float: left;
				width: 47%!important;
				margin-left: 5%!important;
				line-height: 25px!important;
			}
			
			.data-group .opt-left~.body {
				margin-left: 50px;
			}
			
			#popover {
				/*min-width: 260px;*/
				height: 370px;
				top: 55% !important;
				margin-top: -150px;
				left: 50% !important;
				margin-left: -141px;
				border-radius: 3px;
				background-color: #fff;
			}
			
			.mui-popover .mui-popover-arrow {
				display: none !important;
			}
			
			#popover .data-group:before {
				height: 0;
			}
			
			#popover .data-group .data-row label~.body {
				margin-left: 80px;
			}
			
			#popover .data-group .data-row .body {
				padding: 10px 5px 11px 10px;
			}
			
			#popover .data-group .data-row:after {
				left: 10px;
				background-color: #E5E5E5;
			}
			
			#popover .data-group .data-row.first:after {
				left: 5px;
				right: 5px;
				background-color: #E5E5E5;
			}
			
			#popover .data-group .data-row.first {
				min-height: 38px
			}
			
			#add_div {
				margin: 12px 20px 12px 20px;
			}
			
			#add_div a {
				background-color: #3296FA;
				color: #fff;
				padding: 5px 0;
				border: 1px solid #3296FA;
			}
			
			.data-group .data-row .label-gray {
				color: #333333;
			}
			
			.info-title {
				margin-left: 10px;
				line-height: 1;
				color: #1f1f1f;
			}
			
			.title {
				color: #1f1f1f;
			}
			
			.mdt_leftline {
				width: 3px;
				height: 14px;
				background: #169BD5;
				margin-top: -13px;
				margin-left: -3px;
			}
			/*入网设备样式*/
			
			.network-equipment {
				height: 35px;
				background: #FFF6BF;
				text-align: left;
				line-height: 35px;
				color: #FFC200;
				font-size: 1.4rem;
				padding-left: 16px;
			}
			
			.params-flex {
				display: flex!important;
			}
			
			.params-row {
				flex: 1;
				padding: 2px;
				border-radius: 2px;
			}
			
			.params-row-split {
				width: 10px;
			}
			
			.params-row[contenteditable=true] {
				-webkit-user-select: text;
				user-select: auto;
			}
			
			.params-row[contenteditable=true]:empty:before {
				content: attr(placeholder);
				display: block;
				color: #dddddd;
			}
			.choose-p{
				padding-left:10px!important;
			}

			.btn-group .btn-col {
				color: #3296FA;
				font-size: 1.4rem;
			}
		</style>
</head>

<body ng-controller="EquEditController">
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon icon-back mui-pull-left">新增产品</a>
	</header>
	<!--mui-content改为mui-scroll-wrapper，不然拖拽时候页面会滚动-->
	<div class="mui-scroll-wrapper" style="display: none;" ng-class="{'mui-block':isLoad}">

		<ul class="data-group">

			<li class="data-row must">
				<label>产品名称</label>
				<div class="body">
					<!--<input type="text" ng-model="EqInfo.EqIdentifier" lenlimit="50" maxlength="50" id="remarks" placeholder="请输入设备编号" onkeyup="value=value.replace(/[\ud800-\udbff][\udc00-\udfff]/g,'')" />-->
					<input type="text" maxlength="150" ng-model="prodInfo.ProdName" placeholder="请输入产品名称" />
				</div>
			</li>
			<li class="mui-table-view-cell data-row must" >
				<label>目录</label>
				<!-- <p class="opt md-icon font-15">
					<span class="icon-right"></span>
				</p> -->
				<div class="body">
					<span ng-show="dir.ID" ng-bind="dir.SName"></span>
				</div>
			</li>
			<li class="mui-table-view-cell data-row " ng-click="chooseClass()">
				<label>类目</label>
				<p class="opt md-icon font-15">
					<span class="icon-right"></span>
				</p>
				<div class="body">
					<span class="placeholder" ng-show="!class.ID">请选择类目</span>
					<span ng-show="class.ID" ng-bind="class.CName"></span>
				</div>
			</li>
		</ul>

		<ul class="data-group">
			<li class="data-row">
				<label>照片</label>
				<div class="body attach" style="padding-bottom: 5px;">
					<md-image images="Attach" readonly="false" canadd="true"></md-image>
				</div>
			</li>
		</ul>
		<ul class="data-group biglabel params" id="params-body" style="display:none;">
			<p class="data-group-tip">设备参数</p>
			<li class="data-row" ng-repeat="param in EqInfo.Params">
				<p class="opt opt-left icon-sort"></p>
				<div class="body param params-flex " data-id="{{param.ID}}">

					<div class="bg-f2 font-13 params-row needsclick" data-length="50" data-type="name" placeholder="请输入参数名"
					 contenteditable="true" ng-bind="param.ParamName"></div>
					<div class="params-row-split">

					</div>
					<div class="bg-f2 font-13 params-row needsclick" data-length="50" data-type="value" placeholder="请输入参数值"
					 contenteditable="true" ng-bind="param.ParamValue"></div>
					<!--<input class="bg-f2 mui-text-center font-13 input-key" ng-model="param.ParamName" lenlimit="50" maxlength="50" type="text" placeholder="请输入参数名" />-->
					<p class="opt md-icon icon-close" pname="{{param.ParamName}}" pvalue="{{param.ParamValue}}" sortid="{{param.SortID}}"></p>
					<!--<input class="bg-f2 mui-text-center font-13 input-value" ng-model="param.ParamValue" lenlimit="50" maxlength="50" type="text" placeholder="请输入参数值" />-->
				</div>

				<!--<div class="body param">
						
						<input class="bg-f2 mui-text-center font-13 input-key" ng-model="param.ParamName" lenlimit="50" maxlength="50" type="text" placeholder="请输入参数名" />
						<p class="opt md-icon icon-close" pname="{{param.ParamName}}" pvalue="{{param.ParamValue}}" sortid="{{param.SortID}}"></p>
						<input class="bg-f2 mui-text-center font-13 input-value" ng-model="param.ParamValue" lenlimit="50" maxlength="50" type="text" placeholder="请输入参数值" />
					</div>-->
			</li>

		</ul>
		<div class="equplus" ng-click="addParam()" style="display:none;" ng-style="{'padding':EqInfo.Params.length>0?'5px 0 5px 16px':'10px 0 10px 16px'}">+设备参数</div>
		<div class="mui-content-padded">
			<span class="mui-btn mui-btn-block" style="margin-bottom: 30px;" ng-click="submitData()">保存</span>
		</div>
	</div>
	<!--无网络或请求失败重试-->
	<md-state-tip options="retryModal" ng-show="retryModal.state"></md-state-tip>
	<script type="text/javascript" src="../../js/mui.js"></script>
	<script type="text/javascript" src="../../js/sortable-edit.js"></script>
	<script type="text/javascript" src="../../js/angular.min.js"></script>
	<script type="text/javascript" src="../../js/common.js"></script>
	<script type="text/javascript" src="../../js/utils.js"></script>
	<script type="text/javascript" src="../../js/rpc.js"></script>
	<script type="text/javascript" src="prod-edit.js"></script>
</body>

</html>