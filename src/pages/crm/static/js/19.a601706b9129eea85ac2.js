webpackJsonp([19],{TXqn:function(t,e,i){"use strict";(function(t){var a=i("ABCa"),n=i("rHil"),s=i("1DHf"),o=i("kNDc"),r=i("LgOF"),l=i("2FOq"),c=i("F4+m"),u=i("lzuW");e.a={name:"OrderInfo",mixins:[c.a,u.a],components:{XHeader:a.a,Group:n.a,Cell:s.a,Grid:o.a,GridItem:r.a,Previewer:l.a},data:function(){return{options:{saveImg:function(t){}},ID:"",info:{DealDate:"",Prods:[]},imgFile:[],showImgFile:[],isShow:!1,payMethod:["未付","支票","网上银行","电付","邮局汇款","支付宝","其他"],url:"",isMsg:!1}},filters:{picUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return api50+"/api/v1/File/DownLoadPic?filePath="+t+"&w="+e+"&h="+i}},mounted:function(){var t=this;this.ID=this.$route.query.id,this.GetOrderInfoByID(),this.$route.query.url&&(this.url=this.$route.query.url),this.$bus.on("refreshOrderList",function(){t.GetOrderInfoByID()})},beforeRouteEnter:function(t,e,i){var a=!1;"/"==e.path&&(a=!0,window.plus?window.setTimeout(function(){plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview();plus.webview.close(t)})},0):document.addEventListener("plusready",function(){plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview();plus.webview.close(t)})})),i(function(t){t.isMsg=a})},methods:{back:function(){if(this.$route.query.backIndex&&1==this.$route.query.backIndex){var t=plus.webview.currentWebview();plus.webview.close(t)}else this.$router.back()},disposeTime:function(t){if(void 0!=t||null!=t)return t.replace(" 00:00:00","")},GetOrderInfoByID:function(){var e=this;void 0!=this.ID&&t.get("/Order/GetOrderInfoByID/"+this.ID).then(function(t){1===t.data.State&&(e.info=t.data.Data,e.imgFile=[],t.data.Data.ImgAttach.forEach(function(t){e.imgFile.push(t),e.showImgFile.push({src:api50+"/api/v1/File/DownLoadPic?filePath="+t.FilePath})}))}).catch(function(t){})},imgShow:function(t){this.$refs.previewer.show(t)},goto:function(){"已确认"!=this.info.OrderStateName?(this.$router.push("orderInfo/changeOrder?id="+this.info.ID+"&url="+this.url),this.isShow=!1):this.$vux.toast.show({text:"已确认订单不允许修改",type:"warn"})},delOrder:function(){var e=this;this.$vux.confirm.show({title:"删除订单",content:"确认删除订单?",onCancel:function(){},onConfirm:function(){t.post("/Order/DeleteOrderByID/"+e.ID).then(function(t){1===t.data.State?(e.$bus.emit("refreshOrderList"),e.$vux.toast.show({text:"删除成功!",type:"success"}),setTimeout(function(){e.$router.back(),e.$vux.toast.hide()},1e3)):e.$vux.toast.show({text:t.data.ErrorMessage,type:"warn"})}).catch(function(t){})}})},isDel:function(t){return this.$store.state.isAdmin||(t?(new Date).getTime()-new Date(t.replace(/-/g,"/")).getTime()<=864e5:"")}}}}).call(e,i("mtWM"))},m8m6:function(t,e,i){"use strict";(function(t){var e=i("ABCa"),a=i("rHil"),n=i("1DHf"),s=i("kNDc"),o=i("LgOF"),r=i("2FOq"),l=i("F4+m"),c=i("lzuW");l.a,c.a,e.a,a.a,n.a,s.a,o.a,r.a}).call(e,i("mtWM"))},r467:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("m8m6");var a=i("TXqn"),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-info"},[i("x-header",{attrs:{title:"订单详情","left-options":{preventGoBack:!0}},on:{"on-click-back":t.back}},[t.$store.state.isMyClient&&!t.isMsg?i("div",{staticClass:"topHeard",attrs:{slot:"right"},slot:"right"},[i("i",{staticClass:"iconfont icon-gengduo",staticStyle:{"font-size":"20px"},on:{click:function(e){t.isShow=!0}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"topList"},[i("p",{on:{click:t.goto}},[t._v("修改")]),t._v(" "),t.isDel(t.info.CreateDate)?i("p",{on:{click:t.delOrder}},[t._v("删除")]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"topModal",on:{click:function(e){t.isShow=!1}}})]):t._e()]),t._v(" "),i("div",{staticClass:"content"},[i("group",[i("cell",{attrs:{title:"订单编号",value:t.info.OrderNumber}}),t._v(" "),i("cell",{staticClass:"max-width90",attrs:{title:"主题",value:t.info.Title}},[t._t("default",[i("p",{staticStyle:{"word-break":"break-all",display:"inline-block"}},[t._v(t._s(t.info.Title))])])],2),t._v(" "),i("cell",{staticClass:"max-width80",staticStyle:{"text-align":"left"},attrs:{title:"成交客户",value:t.info.CustomerName}}),t._v(" "),i("cell",{attrs:{title:"联系人名称",value:t.info.LinkUserName}}),t._v(" "),i("cell",{attrs:{title:"抄送人"}},[t._t("default",t._l(t.info.Senders,function(e){return i("span",{key:e.ID},[t._v("\n            "+t._s(e.Name)+";\n          ")])}))],2),t._v(" "),i("cell",{attrs:{title:"订单状态",value:t.info.OrderStateName}}),t._v(" "),i("cell",{attrs:{title:"成交总额",value:t.info.TotalPrice}}),t._v(" "),i("cell",{attrs:{title:"付款方式",value:t.payMethod[t.info.PayType-1]}}),t._v(" "),i("cell",{attrs:{title:"成交/签约时间",value:t.disposeTime(t.info.DealDate)}}),t._v(" "),i("cell",{attrs:{title:"有效期开始时间",value:t.disposeTime(t.info.BeginDate)}}),t._v(" "),i("cell",{attrs:{title:"有效期结束时间",value:t.disposeTime(t.info.EndDate)}}),t._v(" "),i("cell",{staticClass:"max-width90",staticStyle:{"border-bottom":"1px solid #eee"},attrs:{title:"说明",value:t.info.Remark}},[t._t("default",[i("p",{staticStyle:{"word-break":"break-all",display:"inline-block","text-align":"left"}},[t._v(t._s(t.info.Remark))])])],2),t._v(" "),0!==t.info.Prods.length?i("group",{staticStyle:{"margin-top":"10px"},attrs:{title:"产品"}},t._l(t.info.Prods,function(t){return i("cell",{key:t.ID,attrs:{title:t.ProdName,value:t.DealNum}})})):t._e(),t._v(" "),0!==t.imgFile.length?i("div",{staticClass:"updatePic flex"},t._l(t.imgFile,function(e,a){return i("div",{key:a,staticClass:"picBoxWrap"},[i("div",{staticClass:"picBox"},[i("img",{attrs:{src:t._f("picUrl")(e.FilePath)},on:{click:function(e){t.imgShowPic(a)}}})])])})):t._e()],1),t._v(" "),i("previewer",{ref:"previewer",attrs:{list:t.showImgFile,options:t.options},on:{"on-close":t.closePic}})],1),t._v(" "),i("router-view")],1)},staticRenderFns:[]};var s=function(t){i("yENZ")},o=i("VU/8")(a.a,n,!1,s,"data-v-45200416",null);e.default=o.exports},yENZ:function(t,e){}});
//# sourceMappingURL=19.a601706b9129eea85ac2.js.map