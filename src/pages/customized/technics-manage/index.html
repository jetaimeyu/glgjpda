<!doctype html>
<html id="MdTong">

<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" href="../../../css/mui.min.css">
	<link rel="stylesheet" href="../../../css/common.css">
	<link rel="stylesheet" href="../../../icon-font/iconfont.css">
</head>

<body ng-controller="TMController">
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon icon-back mui-pull-left">加工工艺</a>
	</header>
	<div class="mui-content">
		<div class="mui-content-padded" style="margin-bottom: 80px;">
			<button id="btnSave" class="mui-btn mui-btn-primary mui-btn-block" ng-click="tap()">
				<span class="icon-saoyisao"></span>
				请扫描工艺过程码
			</button>
		</div>
	</div>
	<script type="text/javascript" src="../../../js/mui.js"></script>
	<script type="text/javascript" src="../../../js/angular.min.js"></script>
	<script type="text/javascript" src="../../../js/common.js"></script>
	<script type="text/javascript" src="../../../js/utils.js"></script>
	<script type="text/javascript" src="../../../js/rpc.js"></script>
	<script type="text/javascript">
		app.controller("TMController", ["$scope", "UtilsService", "DataService", "RPCObserver", "$filter", "DatePickerService", "AuthService",
			function ($scope, UtilsService, DataService, RPCObserver, $filter, DatePickerService, AuthService) {
				window.ScanBackA = function (type, code) {
					if (type == "QR" && code.indexOf("MDGY") > -1) {
						var id = code.substr(4, code.length);
						openWindow("techincs-sel.html", {
							techincsCode: id
						});
					} else {
						mui.alert("请扫描工艺过程码！");
					}
				}

				$scope.tap = function () {
					openWindow("../../scan/scan.html", {
						callback: 'ScanBackA',
						type: 'scan_technics'
					}, 'scan.html')
				};
			}
		]);

		mui.plusReady(function () {
			angular.bootstrap(document.getElementById("MdTong"), ["MdTong"]);
		});
	</script>
</body>

</html>