webpackJsonp([6,48],{"/Dky":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHS0lEQVR4Xu2abYxcZRXHf+fO7kKgJUilVnmxS6pWNGAkGG3LzmzRav3gBwiNQgvMTGFrUDQgBmOi0g9GQjRIjAjszLKLr21IpMY3Uto7a1tYYwslNmB8qYWqwZaXuhW107l/80x3JrObuXPvLLM7k3bvx/uc55z/+T/nOc/bMU7xz05x/5kjYC4CTnEG5qZAswGQyuvDEqswliMWY7zVaGMuEYcx/ox4WvD4wvls2bzGSnH9ih0BqSEtRXwPSMZV3ia552XcXEjbb+LYj0VA35A+7gX8BGNerVLBi4j9ZiiOsZmSkXiTGZfU6C8Jbitk7L4om5EEJHPqB7aa4ZWViZ2B8RVvHr/119jRKAOz1d6f07sC2GjGmqpN4/N+2r7dCENDAvryusDg9wZnTTj/DT9rX5otp6Zjp5yj4IcG50oEnrFye8YKYboaEpDKaQjjxhMDz8ZCxr46HVCz3af/YS0PSoy6qBX85WiRpbsHrFgPRygBK0Z0YaJYnt8u9Mf8jH2wriOS9edYKWPR+HE2hRlqGQnO3hCfCMR7El0Mb7vB/lZPdzKnB824qdwW8Cl/vf24KQKSOd1mxjfLnYzVftp+VddQXncbfHFiihyUcY8ZD/pp+2/LnJ5Q5JKxiXsMLp749Ws/Yx+rZyc1pEUSf3dLtMQjhaxd3xwBeT1qcJXE6wvnc1bY2prMacyMD9QqFxxC3FvsZnDX9fbPN0qES8RmfB2YHIXiiJ+1s8P0p3LaMbFf+YOftaVNEZDK68myQbHXz9r7wowkh7QOMRyyGSpJ/NyMh8aLbNs9YK/HJWPViM48dpy1gltrRnxSd4lvFbJ2eygBeT0CrJUYL2TtRCKf8oXmgGRe+5xhidFC1hpufvpzujQwvoy4urpcTjEkUTQYE2yXxzNeiWfHSxw42+OcYwkWeOItBhfJeCfwbrfhqq4+U3XBHom7RrO2pRGhqZzux9jgZPyM1fW1JQRUQKQGtQTjThnrDHrijnZcOYmnPeOu7Rl7LE6fWSegAmrZiBb2lPi0xC1uPY4DNlRG/E/Go24a+Wnzm9HVNgKqEbFdXforHzKxauIAdXmcg5PgBeB3QMGMET9trzXjeNX+bE+BKJCpIZ0eHKeXLnq9gF483qygnBteCeAVjMPdCfY+cYO9HKUrTnvbIyAOyJmUmSOg06bATI52Pd1zEdApEdD3kHq9Lt5+6Ex27Vtjx6IioS+vZT1F9m0dsCNRsh21EaoHxl1UyC1pJ26TnvpPDx8dW2v/qgtcsuQQgwYZ3Prvsa6Qts3TJaEjpkAqpw0Y91eckHi2q4uVU5e6lNsz7C9fZFxTIxt6iotDSmcQMKgl8thdu68X/LHYxYrKSfGyB9Q9r4vHzFhddR5kAVf56+2ncZzt6CR4xbAuSZRw11LVo6vE/lI3qdLpHDptnJ9hXFnrvMSNo1kbma7zrl9HREDFgSvyutiD7QYLK/8C8Q/PeAmoHrcFaoXzHUeAA+RWA0tQMLigco9eexx1zlvAtWHXV81GQ0dFQAX88pze1gXupqZ3Jp3vyAiokOCOy91FDprR7f65aLAGF5fNjnxFviMjoAKub1AFz+hzzst4dTRj50zX0bB+bSXgmk1KHD7KCln9h1MF3F29TBUv4fHJEEde89P2zHTIaSsBybx+YHBtLODlOdBAUuw4dz6pZl59254Dkjkdq8zxSBKiCAC8gMXb1tuBSF01Au2NgNqXmSjUEQQI9hRe4HK+ZkGUqtr2thJQDkF3S5zg/Hqgm8gBFAN278zaeDPOt30KRIFN5fRLjBPPWuKAn7XFUX2abW97BDQCfNIT4B4ngQGC0Px+HcaSMkkBRzDuDVsGEwE/euImc2eGpr62RkAqL3evf1ksxNGrwMvjRS5s5m2x7TkgmdO/zTijRQTgJTg/rBagI3eCybzSJjZi9VeBSaCjI2DQz9iJYocmvrZOgSicJ30SPBkI2GmwrLwLy1i8ZBbldU37bERA5TwyrQKJVE7fx7hO8GohzQLMWloMOSsE5LTXFVBKPFfIWqWuaNIwhZ7BUnkNQLk01n0f8TO2tYkBjhRN5eV0OxvEqUKJVDhFwN08dRvlCjJBvpCxbD0doQSsHNZ5pRIvTlRZPVnI2rJmQTSSv3JYC0ol7hC834xb/bQ930r9ybweMLg5agAbF0rm5XZnnyuzaNxSSNt3WwlypnT153R1YGwuD15EDmtMwCbN01H2GLzDPVVhfMbP2OBMAW+F3lRObos9DCSAUgB9oxnbFaY7slh64ip7rFrrI3bi8QU/bU+1AnArdKy+T6cdPYNLPeP2ScXS8Fk/Y99pZCOSANfZFU174hcY760qE39iIsm0wolp6xDnCS6aUp7XunL5CjBX36OAO4A7Y+/xp+3VG+q4D7HBz9qOOFpiRUCtouU5ze8RfYGxzD1uIBaFFUfGAdAiGQmes4DH/YNsaebqrGkCWgS4Y9TMEdAxQ9EmIHMR0CbiO8bsKR8B/we4+QN9zLdvzwAAAABJRU5ErkJggg=="},"0mVU":function(t,e){},"3ew9":function(t,e){t.exports="data:image/png;base64,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"},D43y:function(t,e){},NzKH:function(t,e){},WQ96:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),r=s("NYxO"),o=s("ABCa"),n=s("odqc"),c=s("Znkm"),l=s("2sLL"),u=s("Gu7T"),d=s.n(u),h=s("oqQY"),p=s.n(h),f=s("cq2Q"),v=s("8pLc"),m=(f.a,v.a,{props:{cId:{default:0}},data:function(){return{clientList:[],params:{beginFollowupDate:"",endFollowupDate:"",page:1,count:10,customerId:0},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},isSort:!1}},methods:{init:function(){this.getData(1,1)},getData:function(t,e){var s=this;this.$vux.loading.show({text:"加载中"}),this.params.page=e||this.params.page,this.getAxios("/Customer/GetPagedCustomerFollowup",this.params).then(function(a){s.$vux.loading.hide(),a.Data.List.length>0?(2===t?(s.clientList=[].concat(d()(s.clientList),d()(a.Data.List)),s.$refs.scroll.scroll.finishPullUp()):(s.clientList=a.Data.List,s.$refs.scroll.scroll.finishPullDown()),s.params.page+=1,s.$refs.scroll.refresh()):1==e?(s.clientList=[],s.$refs.scroll.forceUpdate(!1)):s.$refs.scroll.forceUpdate(!1)}).catch(function(t){s.$vux.loading.hide(),console.log(t)})},goto:function(t,e){this.$router.push({path:t,query:{id:e,isClient:!0}})}},mounted:function(){var t=this;this.cId&&(this.params.customerId=this.cId,this.getData()),this.$bus.on("refrech",function(){t.getData(1,1)})},beforeDestroy:function(){this.$bus.off("refrech")},watch:{clientList:function(){var t=this;setTimeout(function(){t.$refs.scroll.forceUpdate(!0)},500)},cId:function(){this.params.customerId=this.cId,this.getData()}},filters:{getPicSrc:function(t){return apiPic+"/dXNlci9sb2dv_"+t+"_35x35.png"},dateFormat:function(t){return p()(t).format("YYYY-MM-DD HH:mm")}},components:{Scroll:f.a,NoData:v.a}}),D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("scroll",{ref:"scroll",attrs:{top:"96",pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData(2)},pullingDown:function(e){t.getData(1,1)}}},[s("ul",t._l(t.clientList,function(e,a){return s("li",{key:a,on:{click:function(s){t.goto("clientDetails/followDetails/"+e.ID)}}},[s("div",{staticClass:"flex follow_title"},[s("img",{attrs:{src:t._f("getPicSrc")(e.CreateUserID),alt:""}}),t._v(" "),s("div",[s("h3",[s("span",[t._v(t._s(e.CreateUserName))])]),t._v(" "),s("p",{staticStyle:{"font-size":"12px"}},[s("i",{staticClass:"iconfont icon-date",staticStyle:{"margin-right":"4px",color:"#1e9fff"}}),t._v("\n              "+t._s(t._f("dateFormat")(e.FollowupDate))+"\n            ")]),t._v(" "),s("p",{staticStyle:{"font-size":"12px","line-height":"20px"}},[s("i",{staticClass:"iconfont icon-gongsi-",staticStyle:{"margin-right":"4px",color:"#1e9fff"}}),t._v("\n              "+t._s(e.CustomerName)+"\n            ")])])]),t._v(" "),s("p",{staticClass:"body_p"},[s("span",[t._v(t._s(e.ResultContent))])])])})),t._v(" "),0==t.clientList.length?s("no-data"):t._e()],1)],1)},staticRenderFns:[]};var g=s("VU/8")(m,D,!1,function(t){s("p6A5")},"data-v-50dcf961",null).exports,_={props:{cId:{default:0},item:{default:function(){return{}}}},data:function(){return{dataObj:{}}},mounted:function(){this.dataObj=this.item},methods:{getData:function(){var t=this;this.getAxios("/Customer/GetCustomerInfoByID/"+this.cId).then(function(e){t.dataObj=e.Data})},sourceFormat:function(){}},watch:{item:function(){this.dataObj=this.item}},filters:{dateFormat:function(t){return t?p()(t).format("YYYY-MM-DD"):""},sourceFormat:function(t){var e=[{key:1,value:"转介绍"},{key:2,value:"线上注册"},{key:3,value:"线上询价"},{key:4,value:"预约上门"},{key:5,value:"陌拜"},{key:6,value:"招商资源"},{key:7,value:"公司资源"},{key:8,value:"展会资源"},{key:9,value:"个人资源"},{key:10,value:"电话咨询"},{key:11,value:"邮件咨询"}],s=void 0;try{s=e.find(function(e){return e.key==t})}catch(a){e.map(function(e){e.key==t&&(s=e)})}return s?s.value:""}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"client_info"},[s("ul",[s("li",[s("label",[t._v("所有者：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.SaleChiefName))])]),t._v(" "),s("li",[s("label",[t._v("是否共享：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.IsShare?"共享":"非共享"))])]),t._v(" "),s("li",[s("label",[t._v("是否报备：")]),t._v(" "),s("p",[t._v(t._s(1===t.dataObj.IsReport?"已报备":"未报备"))])]),t._v(" "),1===t.dataObj.IsReport?s("li",[s("label",[t._v("报备时间：")]),t._v(" "),s("p",[t._v(t._s(t._f("dateFormat")(t.dataObj.Report.ReportStartTime)))])]):t._e(),t._v(" "),1===t.dataObj.IsReport?s("li",[s("label",[t._v("报备有效期：")]),t._v(" "),s("p",[t._v(t._s(t._f("dateFormat")(t.dataObj.Report.ReportEndTime)))])]):t._e(),t._v(" "),1===t.dataObj.IsReport?s("li",[s("label",[t._v("报备地址：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.Report.ReportAddress))])]):t._e(),t._v(" "),s("li",[s("label",[t._v("获得客户时间：")]),t._v(" "),s("p",[t._v(t._s(t._f("dateFormat")(t.dataObj.GetDate)))])]),t._v(" "),s("li",[s("label",[t._v("客户介绍：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.Remark))])]),t._v(" "),s("li",[s("label",[t._v("所在城市：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.Province+t.dataObj.City+t.dataObj.District))])]),t._v(" "),s("li",[s("label",[t._v("客户类别：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.CustTypeName))])]),t._v(" "),s("li",[s("label",[t._v("客户状态：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.CustStateName))])]),t._v(" "),s("li",[s("label",[t._v("客户等级：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.CustLevelName))])]),t._v(" "),s("li",[s("label",[t._v("客户来源：")]),t._v(" "),s("p",[t._v(t._s(0==t.dataObj.CustCompID?"自建":"迈迪网注册企业"))])]),t._v(" "),s("li",[s("label",[t._v("成熟度：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.MaturityTypeName))])]),t._v(" "),s("li",[s("label",[t._v("资源渠道：")]),t._v(" "),s("p",[t._v(t._s(t._f("sourceFormat")(t.dataObj.CustFrom)))])]),t._v(" "),s("li",[s("label",[t._v("公司座机：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.Tel))])]),t._v(" "),s("li",[s("label",[t._v("公司地址：")]),t._v(" "),s("p",[t._v(t._s(t.dataObj.Address))])])])])},staticRenderFns:[]};var y=s("VU/8")(_,b,!1,function(t){s("NzKH")},"data-v-baf6f538",null).exports,x=(f.a,v.a,{props:{cId:{default:0}},data:function(){return{userList:[],params:{page:1,count:15,customerId:0},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20}}},mounted:function(){var t=this;this.params.customerId=this.cId,this.getData(),this.$bus.on("init",function(){t.init()})},methods:{dial:function(t){t?plus.device.dial(t):this.$vux.toast.show({type:"warn",text:"该联系人没有填写手机号"})},init:function(){this.getData(1,1)},getData:function(t,e){var s=this;this.params.page=e||this.params.page,this.getAxios("/Customer/GetPagedCustomerLinkManList",this.params).then(function(e){if(e.Data.List.length>0){var a;if(2===t)(a=s.userList).push.apply(a,d()(e.Data.List)),s.$refs.scroll.scroll.finishPullUp();else s.userList=e.Data.List,s.$refs.scroll.scroll.finishPullDown(),s.$refs.scroll.forceUpdate(!1);s.params.page+=1,s.$refs.scroll.refresh()}else s.$refs.scroll.forceUpdate()}).catch(function(t){console.log(t)})},goto:function(t){this.$router.push({path:t})}},watch:{},filters:{dateFormat:function(t){return t?p()(t).format("YYYY-MM-DD"):""}},components:{Scroll:f.a,NoData:v.a}}),w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"client_info"},[s("scroll",{ref:"scroll",attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData(2)},pullingDown:function(e){t.getData(1,1)}}},[s("ul",t._l(t.userList,function(e,a){return s("li",{key:a,staticClass:"flex just-bet",on:{click:function(s){t.goto("clientDetails/userDetails/"+e.ID)}}},[s("div",[s("p",[t._v(t._s(e.LinkName))]),t._v(" "),s("p",{staticStyle:{"font-size":"12px"}},[t._v("手机号："+t._s(e.LinkPhone))])]),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("a",{staticClass:"iconfont icon-ziyuan",staticStyle:{"font-size":"25px"},on:{click:function(s){s.stopPropagation(),t.dial(e.LinkPhone)}}})])])})),t._v(" "),0==t.userList.length?s("no-data"):t._e()],1)],1)},staticRenderFns:[]};var C=s("VU/8")(x,w,!1,function(t){s("0mVU")},"data-v-1a495736",null).exports,I=s("t/5y"),k=s("aEKa"),S=s("xAPd"),L=s("Xxa5"),A=s.n(L),U=s("exGp"),T=s.n(U),$=s("5XJp"),R=(f.a,v.a,{data:function(){return{workList:[],page:1,pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20}}},components:{scroll:f.a,noData:v.a},computed:{workParam:function(){return{customerId:this.cId,page:this.page,count:10}},aImg:function(){return this.workList.map(function(t){return $.a.aImg(t.CreateUserID)})},createTime:function(){return this.workList.map(function(t){return p()(t.BeginDate).format("YYYY-MM-DD HH:mm")})},exeImg:function(){var t=[];return this.workList.map(function(t){return t.Executors}).forEach(function(e,s){t[s]||(t[s]=[]),e.forEach(function(e){t[s].push($.a.aImg(e.UserID))})}),t},extName:function(){return this.workList.map(function(t){return t.Executors})}},methods:{init:function(){this.getList(this.workParam)},getList:function(t){var e=this;this.$vux.loading.show({text:"加载中"}),this.Axios.get("/CrmTask/GetPagedCrmTaskList",{params:t}).then(function(t){t.data.Data.List.length>0?1===e.page?e.workList=t.data.Data.List:e.workList=[].concat(d()(t.data.Data.List),d()(e.workList)):t.data.Data.List.length<=0&&1===e.page&&(e.workList=[]),e.$refs.scroll.forceUpdate(),setTimeout(function(){e.$vux.loading.hide()},500)})},listPulldown:function(){this.page=1,this.getList(this.workParam),this.$refs.scroll.scroll.finishPullDown(),this.$refs.scroll.refresh()},listPullup:function(){var t=this;return T()(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page++,e.next=3,t.getList(t.workParam);case 3:if(e.sent,0!==t.workList.length){e.next=6;break}return e.abrupt("return",!1);case 6:t.$refs.scroll.scroll.finishPullUp(),t.$refs.scroll.refresh();case 8:case"end":return e.stop()}},e,t)}))()},toInfo:function(t){this.$router.push({path:"clientDetails/TaskInfo",query:{id:t}})}},mounted:function(){this.init();var t=document.body.clientHeight;this.$refs.clientList.style.height=t-98+"px"},props:{cId:{}}}),N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"clientList",staticClass:"cur-list"},[s("scroll",{ref:"scroll",staticStyle:{height:"100%"},attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:t.listPullup,pullingDown:t.listPulldown}},[s("ul",{staticClass:"list-box"},[t._l(t.workList,function(e,a){return s("li",{key:e.ID,staticClass:"item",on:{click:function(s){t.toInfo(e.ID)}}},[s("div",{staticClass:"item-context"},[s("div",{staticStyle:{padding:"10px 10px 0 0"}},[s("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.aImg[a]}})]),t._v(" "),s("div",{staticClass:"con-right"},[s("div",{staticClass:"item-con-i"},[t._v(t._s(t.createTime[a]))]),t._v(" "),e.CustomerName?s("div",{staticClass:"item-con-i link-user"},[t._v(t._s(e.LinkUserName)+" ["+t._s(e.CustomerName)+"]")]):t._e(),t._v(" "),s("div",{staticClass:"exe-list "},[s("div",{staticClass:"label-class",staticStyle:{"min-width":"50px"}},[t._v("执行人:")]),t._v(" "),s("div",{staticClass:"padding-l-8 exe-list-box"},t._l(t.extName[a],function(e,i){return s("div",{key:e.id,staticClass:"exe-item"},[s("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.exeImg[a][i]}}),t._v(" "),s("span",{staticClass:"padding-l-8"},[t._v(t._s(e.Name))])])}))]),t._v(" "),s("div",{staticClass:"item-con-i item-content"},[t._v("\n              "+t._s(e.TaskContent)+"\n            ")]),t._v(" "),s("div",{staticClass:"item-con-i item-con-creatime exe-list-box"},[t._v(t._s(e.CreateDate))])])])])}),t._v(" "),t.workList.length?t._e():s("li",[s("noData")],1)],2)])],1)},staticRenderFns:[]};var M=s("VU/8")(R,N,!1,function(t){s("vGfP")},"data-v-3c41f118",null).exports,O=s("r8Ay"),E=s("BPFO"),P=(i()({},Object(r.e)(["clientTab","auth","isAdmin","CurrentUserID"]),{newTab:function(){var t=this;return this.tab.filter(function(e){return!e.auth||t.isAuth(e.auth)})}}),o.a,n.a,c.a,k.a,S.default,O.a,l.a,E.a,I.a,{name:"clientDetails",data:function(){return{custName:"",tabType:2,tab:[{type:1,value:"详细资料"},{type:3,value:"联系人",ref:"user"},{type:2,value:"跟进记录",ref:"follow",auth:"联系跟进"},{type:4,value:"成交订单",ref:"orderlist",auth:"订单管理"},{type:5,value:"任务",ref:"worklist",auth:"待办任务"},{type:6,value:"回款记录",ref:"receiveList",auth:"回款管理"},{type:7,value:"收支",ref:"costlist",auth:"我的账本"}],cId:0,isShow:!1,objData:{},isCom:!1,userShow:!1,isError:!1,isMsg:!1,userType:0,contentType:0,shareType:0,SaleChief:0}},mounted:function(){var t=this;this.$refs.details_body.style.height=document.body.clientHeight-this.$refs.details_top.clientHeight+"px",this.$bus.on("onSave",function(){var e=t.tab.find(function(e){return e.type==t.tabType}).ref;e?t.$refs[e].init():t.getData()}),this.$bus.on("refrech",function(){var e=t.tab.find(function(e){return e.type==t.tabType}).ref;e?t.$refs[e].init():t.getData()});var e=this.$route.query;this.cId=e.id,this.SaleChief=e.SaleChief,this.isCom=e.isCom,this.getData(),e.tab?this.$store.dispatch("initIsAdmin").then(function(s){var a=t.tab.find(function(t){return t.type==e.tab}).auth;t.isAuth(a)||3==e.tab||1==e.tab?t.tabType=parseInt(e.tab):(t.$vux.toast.show({type:"warn",text:"您没有此模块权限"}),t.tabType=1)}):e.backIndex&&1==e.backIndex?this.$store.dispatch("initIsAdmin").then(function(e){t.isAuth("联系跟进")||(t.tabType=1)}):this.isAuth("联系跟进")||(this.tabType=1)},beforeDestroy:function(){this.$bus.off("onSave"),this.$bus.off("refrech")},beforeRouteEnter:function(t,e,s){s(function(t){"/"==e.path?window.plus?window.setTimeout(function(){plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview();plus.webview.close(t)})},0):document.addEventListener("plusready",function(){plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview();plus.webview.close(t)})}):(plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){t.$router.back()}))})},methods:{back:function(){if(this.$route.query.backIndex&&1==this.$route.query.backIndex){var t=plus.webview.currentWebview();plus.webview.close(t)}else this.$router.back()},getClient:function(){var t=this;this.$vux.confirm.show({content:"确定领取该客户？",onConfirm:function(){var e=JSON.parse(localStorage.getItem("user")),s=e?e.data.UserID:204;t.postAxios("/Customer/SetCustomerOwner?SaleChief="+s+"&type=1",[t.cId]).then(function(e){t.$vux.toast.show({type:"success",text:"领取成功"}),t.$bus.emit("init"),t.$router.back()})}})},getData:function(){var t=this;this.getAxios("/Customer/GetCustomerInfoByID/"+this.cId,{userId:this.SaleChief}).then(function(e){var s=e.Data;t.objData=s,t.cLink=s.LinkID,t.custName=s.CustomerName,t.cState=s.CustState}).catch(function(e){e.ErrorMessage&&(t.isError=!0,t.$vux.toast.show({type:"cancel",text:err.ErrorMessage}))})},onItemClick:function(t){this.tabType=t},toCommon:function(){var t=this,e=JSON.parse(localStorage.getItem("user"));e&&e.data.UserID;if(1==this.objData.IsReport)return this.$vux.toast.show({type:"cancel",text:"已报备的客户无法转为公共客户"}),!1;this.$vux.confirm.show({content:"确定转为公共客户？",onConfirm:function(){t.postAxios("/Customer/SetCustomerOwner?SaleChief=0&type=2",[t.cId]).then(function(e){t.$vux.toast.show({type:"success",text:"成功"}),t.$bus.emit("init"),t.$router.back()}).catch(function(e){e.ErrorMessage?t.$vux.toast.show({type:"cancel",text:e.ErrorMessage}):t.$vux.toast.show({type:"cancel",text:"失败"})})}})},share:function(t,e){this.contentType=t,this.shareType=e,2==e?this.passTo(1):this.toShare()},toShare:function(t){var e=[];t&&t.length&&t.map(function(t){e.push(t.ID)});var s=this,a="";switch(parseInt(this.contentType)){case 0:a="共享该客户？";break;case 1:a="取消共享该客户？";break;case 2:a="取消共享指定人？";break;default:a=""}this.$vux.confirm.show({content:a,onConfirm:function(){var t={IsShare:s.shareType,CustIds:[s.cId],UserIds:e};s.postAxios("/Customer/SetCustomerIsShare",t).then(function(t){s.$vux.toast.show({type:"success",text:"成功"}),s.$bus.emit("init"),s.userShow=!1,s.$router.back()}).catch(function(t){t.ErrorMessage?s.$vux.toast.show({type:"cancel",text:t.ErrorMessage}):s.$vux.toast.show({type:"cancel",text:"失败"})})}})},passTo:function(t){if(2===t&&1==this.objData.IsReport)return this.$vux.toast.show({type:"cancel",text:"已报备的客户无法转交"}),!1;this.userType=t,this.userShow=!0},selectedUser:function(t){return 1!=this.userType||t.length?2!=this.userType||t?void(1==this.userType?this.toShare(t):this.userSelected(t)):(this.$vux.toast.show({type:"warn",text:"请选择转交人"}),!1):(this.$vux.toast.show({type:"warn",text:"请选择人员"}),!1)},userSelected:function(t){var e=this;return t.ID?t.ID==this.CurrentUserID?(this.$vux.toast.show({type:"warn",text:"不能指定为自己"}),!1):void this.$vux.confirm.show({content:"确定转交该客户？",onConfirm:function(){e.postAxios("/Customer/SetCustomerOwner?SaleChief="+t.ID+"&type=3",[e.cId]).then(function(s){e.$vux.toast.show({type:"success",text:"成功"}),e.send([t.ID],e.cId),e.userShow=!1,e.$bus.emit("init"),e.$router.back()}).catch(function(t){t.ErrorMessage?e.$vux.toast.show({type:"cancel",text:t.ErrorMessage}):e.$vux.toast.show({type:"cancel",text:"失败"})})}}):(this.$vux.toast.show({type:"warn",text:"请选择转交人"}),!1)},send:function(t,e){var s={SendUsers:t,EvName:"crm-customer",ImgPath:down+"/mdtcrm/CRMClient.jpg",Title:"客户",Content:"您有一个新的客户",Params:[e]};this.postAxios(api50+"/api/v1/Common/SendSingleEventMsg",s).then(function(t){console.log(t)})},del:function(){var t=this;this.$vux.confirm.show({content:"确定删除该数据？",onConfirm:function(){t.postAxios("/Customer/DeleteCustomerInfoByIds",[t.cId]).then(function(e){t.$vux.toast.show({type:"success",text:"删除成功"}),t.$bus.emit("init"),t.$router.back()}).catch(function(e){e.ErrorMessage?t.$vux.toast.show({type:"cancel",text:e.ErrorMessage}):t.$vux.toast.show({type:"cancel",text:"删除失败"})})}})},addTo:function(){var t="";switch(this.tabType){case 2:t="addFollow";break;case 1:t="addClient";break;case 3:t="addCustUser";break;case 4:t="addOrder";break;case 5:t="addTask";break;case 6:t="addReceive";break;case 7:t="newCost"}this.goto("clientDetails/"+t)},goto:function(t){this.$router.push({path:t,query:{cId:this.cId,cName:this.custName,cLink:this.cLink,cState:this.cState,cCustStateName:this.objData.CustStateName,cLinkName:this.objData.LinkName}})},isAuth:function(t){return this.auth.find(function(e){return e.name==t})},isDel:function(t){return this.isAdmin||(t?(new Date).getTime()-new Date(t.replace(/-/g,"/")).getTime()<=864e5:"")},cancelReport:function(){var t=this;this.$vux.confirm.show({content:"确定取消报备？",onConfirm:function(){t.getAxios("/Customer/CancelReport",{customerId:t.objData.ID}).then(function(e){t.$vux.toast.show({type:"success",text:"取消成功"}),t.$bus.emit("init"),t.$router.back()}).catch(function(e){e.ErrorMessage?t.$vux.toast.show({type:"cancel",text:e.ErrorMessage}):t.$vux.toast.show({type:"cancel",text:"取消失败"})})}})}},computed:i()({},Object(r.e)(["clientTab","auth","isAdmin","CurrentUserID"]),{newTab:function(){var t=this;return this.tab.filter(function(e){return!e.auth||t.isAuth(e.auth)})}}),components:{XHeader:o.a,Tab:n.a,TabItem:c.a,Details:y,LinkUser:C,Follow:g,OrderList:k.a,CostList:S.default,ReceiveList:O.a,WorkList:M,XButton:l.a,UserSelect:E.a,DelData:I.a}}),Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"fixed"},[s("div",{ref:"details_top"},[s("x-header",{attrs:{"left-options":{preventGoBack:!0}},on:{"on-click-more":function(e){t.showMenus=!0},"on-click-back":t.back}},[t._v("\n        "+t._s(t.custName)+"\n        "),t.$store.state.isMyClient?s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isError,expression:"!isError"}],staticClass:"topHeard",staticStyle:{"margin-top":"-5px"},attrs:{slot:"right"},slot:"right"},[s("svg",{directives:[{name:"show",rawName:"v-show",value:1!=t.tabType,expression:"tabType != 1"}],staticClass:"vux-x-icon vux-x-icon-ios-plus-empty",attrs:{type:"ios-plus-empty",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"},on:{click:t.addTo}},[s("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:1===t.tabType,expression:"tabType === 1"}],staticClass:"iconfont icon-gengduo",staticStyle:{"font-size":"20px"},on:{click:function(e){t.isShow=!0}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"topList"},[s("p",{on:{click:function(e){t.addTo(),t.isShow=!1}}},[t._v("修改")]),t._v(" "),t.isDel(t.objData.CreateDate)?s("p",{on:{click:t.del}},[t._v("删除")]):t._e(),t._v(" "),1!=t.objData.IsShare?s("p",{on:{click:function(e){t.share(0,1)}}},[t._v("共享")]):t._e(),t._v(" "),t.objData.IsShare&&1==t.objData.IsShare?s("p",{on:{click:function(e){t.share(1,0)}}},[t._v("取消共享")]):t._e(),t._v(" "),2!=t.objData.IsShare?s("p",{on:{click:function(e){t.share(0,2)}}},[t._v("共享给指定人")]):t._e(),t._v(" "),t.objData.IsShare&&2==t.objData.IsShare?s("p",{on:{click:function(e){t.share(2,0)}}},[t._v("取消共享指定人")]):t._e(),t._v(" "),s("p",{on:{click:function(e){t.passTo(2)}}},[t._v("转交")]),t._v(" "),s("p",{on:{click:t.toCommon}},[t._v("转为公共")]),t._v(" "),1==t.objData.IsReport&&t.objData.Report&&t.objData.Report.CreateUserID==t.CurrentUserID?s("p",{on:{click:t.cancelReport}},[t._v("取消报备")]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"topModal",on:{click:function(e){t.isShow=!1}}})]):t._e(),t._v(" "),t.isCom?s("div",{staticClass:"topHeard",staticStyle:{"margin-top":"-3px"},attrs:{slot:"right"},slot:"right"},[s("span",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),t.getClient()}}},[t._v("领取")])]):t._e()]),t._v(" "),s("tab",{directives:[{name:"show",rawName:"v-show",value:!t.isError,expression:"!isError"}],ref:"tab",staticStyle:{"padding-top":"91px",top:"48px"}},t._l(t.newTab,function(e){return s("tab-item",{key:e.type,attrs:{selected:e.type===t.tabType},on:{"on-item-click":function(s){t.onItemClick(e.type)}}},[t._v(t._s(e.value))])}))],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isError,expression:"!isError"}],ref:"details_body",staticStyle:{overflow:"auto",background:"#fff"}},[1===t.tabType?s("Details",{ref:"details",attrs:{cId:t.cId,item:t.objData}}):t._e(),t._v(" "),2===t.tabType?s("follow",{ref:"follow",attrs:{cId:t.cId}}):t._e(),t._v(" "),3===t.tabType?s("link-user",{ref:"user",attrs:{cId:t.cId}}):t._e(),t._v(" "),4===t.tabType?s("order-list",{ref:"orderlist",attrs:{cId:t.cId,url:"clientDetails"}}):t._e(),t._v(" "),5===t.tabType?s("work-list",{ref:"worklist",attrs:{cId:t.cId}}):t._e(),t._v(" "),6===t.tabType?s("receive-list",{ref:"receiveList",attrs:{cId:t.cId}}):t._e(),t._v(" "),7===t.tabType?s("cost-list",{ref:"costlist",attrs:{cId:t.cId}}):t._e()],1),t._v(" "),s("router-view",{staticClass:"fixed"}),t._v(" "),s("user-select",{attrs:{show:t.userShow,title:1==t.userType?"选择共享人":"选择转交人",radioBool:1!=t.userType},on:{save:t.selectedUser,close:function(e){t.userShow=!1}}}),t._v(" "),s("del-data",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"isError"}],attrs:{title:"客户"}})],1)])},staticRenderFns:[]};var j=s("VU/8")(P,Y,!1,function(t){s("kOAE")},"data-v-5f24d6d3",null);e.default=j.exports},ZOJa:function(t,e,s){"use strict";(function(t,a){var i=s("Gu7T"),r=s.n(i),o=s("ABCa"),n=s("cq2Q"),c=s("8pLc"),l=s("rUbY"),u=s("/W8D");e.a={name:"OrderList",components:{XHeader:o.a,Scroll:n.a,NoData:c.a,Query:l.a,Progress:u.a},props:{cId:{default:"0"},url:{default:""}},data:function(){return{page:1,count:20,pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},list:[],beginDealDate:"",endDealDate:"",createUserId:this.$store.state.CurrentUserID,id:"",expirEndDate:"",orderStateData:"0"}},mounted:function(){var e=this;this.$route.query.id&&(this.id=this.$route.query.id),this.$route.query.enddate?this.expirEndDate=t(new Date).format("YYYY-MM-DD"):this.expirEndDate="",this.$route.query.beginDate?this.beginDealDate=this.$route.query.beginDate:this.beginDealDate="",this.$route.query.endDate?this.endDealDate=this.$route.query.endDate:this.endDealDate="",this.$route.query.userId&&-1==this.$route.query.userId&&(this.createUserId=0),0==this.$route.query.userId&&(this.createUserId=this.$store.state.CurrentUserID),this.GetMyOrderList(),this.$bus.on("refreshOrderList",function(){e.GetMyOrderList()})},activated:function(){},beforeDestroy:function(){},methods:{ratio:function(t){var e=t.TotalReturnMeony/t.TotalPrice!=NaN?t.TotalReturnMeony/t.TotalPrice*100:"";return"100%"==e&&t.TotalPrice-t.TotalReturnMeony>0&&(e="99%"),parseFloat(e.toFixed(2))},init:function(){this.GetMyOrderList()},getLastMoney:function(t){return(t.TotalPrice-t.TotalReturnMeony).toFixed(2)},GetMyOrderList:function(){var t=this;this.$vux.loading.show({text:"加载中"});var e="";e="/client/clientDetails"==this.$route.path?"/Order/GetPagedOrderList?page="+this.page+"&count="+this.count+"&customerId="+this.id+"&createUserId="+this.createUserId+"&beginDealDate="+this.beginDealDate+"&endDealDate="+this.endDealDate:"/Order/GetMyOrderList?page="+this.page+"&count="+this.count+"&customerId="+this.cId+"&createUserId="+this.createUserId+"&beginDealDate="+this.beginDealDate+"&endDealDate="+this.endDealDate+"&expirEndDate="+this.expirEndDate+"&orderState="+this.orderStateData,a.get(e).then(function(e){var s;(t.$vux.loading.hide(),1===e.data.State)&&(1===t.page?(t.list=e.data.Data.List,t.$refs.scroll.scroll.finishPullDown()):((s=t.list).push.apply(s,r()(e.data.Data.List)),t.$refs.scroll.scroll.finishPullUp()));t.$refs.scroll.forceUpdate(),t.$refs.scroll.refresh()}).catch(function(e){t.$vux.loading.hide(),t.$refs.scroll.scroll.finishPullDown(),t.$refs.scroll.forceUpdate(),t.$vux.toast.show({text:"网络异常",type:"warn"})})},getData:function(t){1===t?this.page=1:this.page++,this.GetMyOrderList()},dateQuery:function(t){this.beginDealDate=t.beginDate,this.endDealDate=t.endDate,this.GetMyOrderList()},orderDate:function(e){e?(this.expirEndDate=t(new Date).format("YYYY-MM-DD"),this.getData(1)):(this.expirEndDate="",this.getData(1))},orderState:function(t){this.orderStateData=t,this.getData(1)},selectedUser:function(t){this.createUserId=t,this.getData(1)},clearOrderType:function(){this.orderStateData="0",this.getData(1)},enter:function(){}}}}).call(e,s("oqQY"),s("mtWM"))},aEKa:function(t,e,s){"use strict";s("qEe6");var a=s("ZOJa"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Query",{directives:[{name:"show",rawName:"v-show",value:"0"==t.cId,expression:"cId == '0'"}],attrs:{isClass:!1,isOrder:!0,placeholder:"请输入联系人",formatDate:"YYYY-MM-DD"},on:{dateQuery:t.dateQuery,selectedUser:t.selectedUser,enter:t.enter,orderDate:t.orderDate,orderState:t.orderState,clearOrderType:t.clearOrderType}}),t._v(" "),a("scroll",{ref:"scroll",attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData()},pullingDown:function(e){t.getData(1)}}},[0!==t.list.length?a("ul",t._l(t.list,function(e){return a("li",{key:e.ID,staticClass:"list-item",on:{click:function(s){t.$router.push(t.url+"/orderInfo?id="+e.ID+"&url="+t.url)}}},[a("div",[a("div",[t._v(t._s(e.DealDate.replace("00:00:00","")))]),t._v(" "),a("div",[t._v("￥"+t._s(null!=e.TotalPrice?e.TotalPrice.toFixed(2):""))])]),t._v(" "),a("div",[a("span",{staticStyle:{display:"inline-block","vertical-align":"top"}},[t._v("成交客户：")]),t._v(" "),a("span",{staticStyle:{width:"70%","text-overflow":"ellipsis",display:"inline-block"}},[t._v(t._s(e.CustomerName))])]),t._v(" "),a("ul",[a("li",[t._v("订单编号："+t._s(e.OrderNumber))]),t._v(" "),a("li",{staticStyle:{"text-overflow":"ellipsis"}},[t._v("说明："+t._s(e.Remark))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("回")]),t._v(t._s(e.TotalReturnMeony.toFixed(2)))]),t._v(" "),a("div",[a("span",[t._v("欠")]),t._v(t._s(t.getLastMoney(e)))])]),t._v(" "),t.$store.state.isMyClient?a("div",[a("div",[t._v("回款比例:\n          ")]),t._v(" "),a("Progress",{staticStyle:{flex:"1"},attrs:{height:"20px",percentage:t.ratio(e)}})],1):t._e(),t._v(" "),a("div",{staticClass:"order_btn_wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"已确认"==e.OrderStateName,expression:"item.OrderStateName == '已确认'"}],staticClass:"pushBtn order_btn",on:{click:function(s){s.stopPropagation(),t.$router.push("/client/clientDetails/receive?cId="+e.CustomerID+"&cName="+e.CustomerName+"&orderNumber="+e.OrderNumber+"&orderID="+e.ID+"&add=1")}}},[a("img",{staticClass:"order_img",attrs:{src:s("/Dky"),alt:""}}),t._v("订单回款\n          ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"已确认"==e.OrderStateName,expression:"item.OrderStateName == '已确认'"}],staticClass:"order_btn",on:{click:function(s){s.stopPropagation(),t.$router.push("/client/clientDetails/addReceive?cId="+e.CustomerID+"&cName="+e.CustomerName+"&orderNumber="+e.OrderNumber+"&orderID="+e.ID+"&payType="+e.PayType)}}},[a("img",{staticClass:"order_img",attrs:{src:s("3ew9"),alt:""}}),t._v("新建回款\n          ")])])])})):t._e(),t._v(" "),a("no-data",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"list.length == 0"}]})],1)],1)},staticRenderFns:[]};var r=function(t){s("D43y")},o=s("VU/8")(a.a,i,!1,r,"data-v-6df60fad",null);e.a=o.exports},kOAE:function(t,e){},p6A5:function(t,e){},qEe6:function(t,e,s){"use strict";(function(t,e){var a=s("Gu7T"),i=(s.n(a),s("ABCa")),r=s("cq2Q"),o=s("8pLc"),n=s("rUbY"),c=s("/W8D");i.a,r.a,o.a,n.a,c.a}).call(e,s("oqQY"),s("mtWM"))},qhpj:function(t,e){},r8Ay:function(t,e,s){"use strict";var a=s("Gu7T"),i=s.n(a),r=s("cq2Q"),o=s("YxJB"),n=s("3Lt7"),c=s("ABCa"),l=s("UNGY"),u=s("rHil"),d=s("8pLc"),h=s("rUbY"),p=(r.a,o.a,n.a,c.a,l.a,u.a,d.a,h.a,{name:"receiveList",components:{Scroll:r.a,Flexbox:o.a,FlexboxItem:n.a,XHeader:c.a,Datetime:l.a,Group:u.a,NoData:d.a,Query:h.a},props:{cId:{default:"0"},orderId:{default:0}},data:function(){return{clientList:[],pageParams:{orderId:this.orderId,customerId:0,customerName:"",beginReturnDate:"",endReturnDate:"",page:1,total:10,count:10,createUserId:0},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},isSort:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.getData()}),this.$bus.on("refreshReceiveList",function(){t.pageParams.page=1,t.getData()}),this.$route.query.beginDate?this.pageParams.beginReturnDate=this.$route.query.beginDate:this.pageParams.beginReturnDate="",this.$route.query.endDate?this.pageParams.endReturnDate=this.$route.query.endDate:this.pageParams.endReturnDate="",-1==this.$route.query.userId?this.pageParams.createUserId=0:this.pageParams.createUserId="",0==this.$route.query.userId?this.pageParams.createUserId=this.$store.state.CurrentUserID:this.pageParams.createUserId=0},beforeDestroy:function(){this.$bus.off("refreshReceiveList")},methods:{init:function(){},gotoAddPage:function(){this.$router.push({path:"/receive/addReceive?cid="+this.pageParams.customerId})},getData:function(t){var e=this,s="/Cost/GetMyReturnedMoney";0!=this.cId&&(s="/Cost/GetPagedCrmReturnedMoney"),1==t&&(this.pageParams.page=1),this.pageParams.customerId=this.cId,this.Axios.get(s,{params:this.pageParams}).then(function(s){var a=s.data.Data.List;a.length>0?(2===t?(e.clientList=[].concat(i()(e.clientList),i()(a)),e.$nextTick(function(){e.$refs.scroll.scroll.finishPullUp()})):(e.clientList=a,e.$nextTick(function(){e.$refs.scroll.scroll.finishPullDown(),e.$refs.scroll.refresh(!0)})),e.pageParams.page+=1,e.$nextTick(function(){e.$refs.scroll.refresh()})):(e.clientList=a,e.$nextTick(function(){e.$refs.scroll.forceUpdate()}))})},dateQuery:function(t){this.pageParams.beginReturnDate=t.beginDate,this.pageParams.endReturnDate=t.endDate,this.pageParams.page=1,this.getData()},selectedUser:function(t){this.pageParams.createUserId=t,this.pageParams.page=1,this.getData()}},watch:{clientList:function(){var t=this;setTimeout(function(){t.$refs.scroll.forceUpdate(!0)},500)},cId:function(){var t=this;this.$nextTick(function(){t.$refs.checkList.style.paddingTop="0"}),this.getData()},orderId:function(t,e){this.pageParams.orderId=t,this.getData()}}}),f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"clientList",staticClass:"check-list1"},[s("Query",{directives:[{name:"show",rawName:"v-show",value:"0"==t.cId||void 0==t.cId,expression:"cId == '0'||cId == undefined"}],attrs:{isClass:!1,placeholder:"请输入联系人"},on:{dateQuery:t.dateQuery,selectedUser:t.selectedUser}}),t._v(" "),s("scroll",{ref:"scroll",staticStyle:{"padding-top":"10px"},attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData(2)},pullingDown:function(e){t.getData(1)}}},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.clientList.length>0,expression:"clientList.length > 0"}]},t._l(t.clientList,function(e,a){return s("li",{key:a,on:{click:function(s){t.$router.push("/receiveInfo?id="+e.ID)}}},[s("flexbox",{staticClass:"check-box",attrs:{orient:"vertical"}},[s("flexbox-item",[s("div",{staticClass:"flex-demo"},[t._v("\n              订单编号："),s("span",[t._v(t._s(e.OrderNumber))])])]),t._v(" "),s("flexbox-item",[s("div",{staticClass:"flex-demo"},[t._v("\n              回款时间："),s("span",[t._v(t._s(e.ReturnDate))])])]),t._v(" "),s("flexbox-item",[s("div",{staticClass:"flex-demo"},[t._v("客户名称："),s("span",[t._v(t._s(e.CustomerName))])])]),t._v(" "),s("flexbox-item",[s("div",{staticClass:"flex-demo"},[t._v("回款金额："),s("span",[t._v(t._s(e.ReturnPrice)+" 元")])])])],1)],1)})),t._v(" "),s("no-data",{directives:[{name:"show",rawName:"v-show",value:0==t.clientList.length,expression:"clientList.length==0"}]})],1),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var v=s("VU/8")(p,f,!1,function(t){s("riR+")},"data-v-00707212",null);e.a=v.exports},"riR+":function(t,e){},"t/5y":function(t,e,s){"use strict";var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex just-ct",staticStyle:{"align-items":"center",height:"100%",background:"#f0f2ff"}},[e("div",{staticStyle:{"text-align":"center","line-height":"2",color:"#999"}},[e("i",{staticClass:"iconfont icon-gantanhao-xianxingsanjiaokuang",staticStyle:{"font-size":"20px"}}),this._v(" "),e("p",[this._v(this._s(this.title)+"已被删除")]),this._v(" "),e("p",[this._v("点击返回...")])])])},staticRenderFns:[]};var i=s("VU/8")({name:"DelData",props:{title:""}},a,!1,function(t){s("yw/z")},null,null);e.a=i.exports},vGfP:function(t,e){},xAPd:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Gu7T"),i=s.n(a),r=s("oqQY"),o=s.n(r),n=(s("NYxO"),s("YxJB")),c=s("3Lt7"),l=s("ABCa"),u=s("rHil"),d=s("pDNl"),h=s("8pLc"),p=s("cq2Q"),f=s("rUbY"),v=(n.a,c.a,l.a,p.a,u.a,d.a,h.a,f.a,{name:"costList",props:{cId:{default:"0"}},data:function(){return{costList:[],params:{customerId:0,customerName:"",page:1,count:10,createUserId:this.$store.state.CurrentUserID,startCostDate:"",endCostDate:"",costType:0,costClassId:0},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},isSort:!1,noPt:!1,formatDate:"YYYY-MM-DD",dateTiele:"收支日期",filterArr:[{type:0,name:"收支类型",init:0,notDict:!0,list:[{types:"收支类型",ID:0,name:"全部"},{types:"收支类型",ID:1,name:"收入"},{types:"收支类型",ID:2,name:"支出"}]},{type:22,name:"费用名称"}]}},methods:{dateQuery:function(t){t.beginDate?(this.params.startCostDate=t.beginDate+" 00:00:00",this.params.endCostDate=t.endDate+" 23:59:59"):(this.params.startCostDate="",this.params.endCostDate=""),this.getData(1,1)},selectedParams:function(t){"收支类型"==t.types&&(this.params.costType=t.ID,this.getData(1,1),this.$refs.scroll.scrollTo(0,0,200)),22==t.DictType&&(this.params.costClassId=t.ID,this.getData(1,1),this.$refs.scroll.scrollTo(0,0,200))},clearType:function(){this.params.costType=0,this.params.costClassId=0,this.getData(1,1)},getData:function(t,e){var s=this,a="/Cost/GetMyCostRecord";0!=this.cId&&(a="/Cost/GetPagedCrmCostRecord"),this.$vux.loading.show({text:"加载中"}),this.params.page=e||this.params.page,this.cId&&(this.params.customerId=this.cId),this.getAxios(a,this.params).then(function(e){s.$vux.loading.hide(),e.Data.List.length>0?(e.Data.List.forEach(function(t){t.CostDate=o()(t.CostDate).format("YYYY-MM-DD")}),2===t?(s.costList=[].concat(i()(s.costList),i()(e.Data.List)),s.$refs.scroll.scroll.finishPullUp()):(s.costList=e.Data.List,s.$refs.scroll.scroll.finishPullDown()),s.params.page+=1,s.$refs.scroll.refresh()):1==s.params.page?(s.costList=[],s.$refs.scroll.forceUpdate()):s.$refs.scroll.forceUpdate()}).catch(function(t){s.$vux.loading.hide()})},init:function(){this.getData(1,1)},goto:function(t,e){this.$router.push({path:t,query:{id:e}})},newCost:function(){this.goto("/cost/newCost")},gotoInfo:function(t){t.OrderNumber?this.goto("/cost/receiveInfo/"+t.ReturnID):0!=this.cId?this.goto("clientDetails/costInfo/"+t.ID):this.goto("/cost/costInfo/"+t.ID)},gotoIndex:function(){this.goto("/")},selectedUser:function(t){this.params.createUserId=t,this.getData(1,1)}},mounted:function(){var t=this;console.log(this.$route.params.perxObj);var e=this.$route.params.perxObj;e&&(e.createUserId&&(this.params.createUserId=e.createUserId),e.startCostDate&&(this.params.startCostDate=e.startCostDate),e.endDendCostDateate&&(this.params.endCostDate=e.endDendCostDateate),(e.costClassId||e.classID)&&(this.params.costClassId=e.costClassId||e.classID),"支出"==e.type&&(this.params.costType=2)),this.getData(),this.$bus.on("refrechCostList",function(){t.getData(1,1)})},beforeDestroy:function(){this.$bus.off("refrechCostList")},filters:{getPicSrc:function(t){return apiPic+"/dXNlci9sb2dv_"+t+"_35x35.png"}},watch:{costList:function(){var t=this;setTimeout(function(){t.$refs.scroll.forceUpdate(!0)},500)}},beforeRouteLeave:function(t,e,s){"/newCost"!=t.path&&"/costInfo"!=t.path?(e.meta.keepAlive=!1,s()):s()},components:{Flexbox:n.a,FlexboxItem:c.a,XHeader:l.a,Scroll:p.a,Group:u.a,XInput:d.a,NoData:h.a,Query:f.a}}),m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"costList"},[0==this.cId?s("x-header",{attrs:{"left-options":{backText:""}}},[t._v("我的账本\r\n            "),s("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus-empty icon",attrs:{slot:"right",type:"ios-plus-empty",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"},on:{click:function(e){t.newCost()}},slot:"right"},[s("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]):t._e(),t._v(" "),0==this.cId?s("query",{attrs:{types:t.filterArr,formatDate:t.formatDate,dateTitle:t.dateTiele},on:{dateQuery:t.dateQuery,selectedParams:t.selectedParams,clearType:t.clearType,selectedUser:t.selectedUser}}):t._e(),t._v(" "),s("scroll",{ref:"scroll",attrs:{background:"#F0F2FF",pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(e){t.getData(2)},pullingDown:function(e){t.getData(1,1)}}},[s("ul",{staticClass:"clist-ul"},t._l(t.costList,function(e,a){return s("li",{key:a,on:{click:function(s){t.gotoInfo(e)}}},[s("div",{staticStyle:{width:"15%",float:"left"}},[s("img",{attrs:{src:t._f("getPicSrc")(e.CreateUserID),alt:""}})]),t._v(" "),s("div",{staticStyle:{width:"85%",float:"left"}},[s("h3",[s("span",{staticStyle:{width:"60%"}},[t._v(t._s(e.CreateUserName))]),t._v(" "),s("span",{staticStyle:{color:"#409eff"}},[s("span",{class:{fontcoler:e.CostType-1}},[1==e.CostType?s("span",[t._v("+")]):t._e(),t._v(" "),2==e.CostType?s("span",[t._v("-")]):t._e(),t._v(t._s(e.CostMoney)+"\r\n                                ")])])]),t._v(" "),s("h4",[s("span",[t._v("收支日期: "+t._s(e.CostDate))]),t._v(" "),s("span",{staticStyle:{float:"right"}},[t._v(t._s(e.CostClassName))])]),t._v(" "),s("p",[s("span",[t._v("关联客户: "+t._s(e.CustomerName))]),t._v(" "),e.CustomerName?t._e():s("span",[t._v("无")]),t._v(" "),e.LinkUserName?s("span",[t._v("| "+t._s(e.LinkUserName))]):t._e()]),t._v(" "),e.CustomerName?s("p",[s("span",[t._v("客户所有者: "+t._s(e.SaleChiefName)+"\r\n                                ")])]):t._e()]),t._v(" "),e.OrderNumber?s("P",{staticStyle:{color:"#666"}},[s("span",{staticStyle:{color:"#666"}},[t._v("[通过回款自动生成的费用收支]")])]):t._e(),t._v(" "),e.Description?s("p",{staticStyle:{color:"#666"}},[s("span",{staticStyle:{color:"#888"}},[t._v(t._s(e.Description))])]):t._e(),t._v(" "),s("p",{staticStyle:{height:"1px","line-height":"1px"}}),t._v(" "),s("div",{staticStyle:{height:"1px",clear:"both"}})],1)})),t._v(" "),0==t.costList.length?s("no-data"):t._e()],1),t._v(" "),s("router-view",{staticStyle:{position:"fixed",top:"0",bottom:"0","z-index":"502",left:"0",right:"0",background:"#fff"}})],1)])},staticRenderFns:[]};var D=s("VU/8")(v,m,!1,function(t){s("qhpj")},"data-v-743b489c",null);e.default=D.exports},"yw/z":function(t,e){}});
//# sourceMappingURL=6.6d6fd07e2139b015d3d7.js.map