webpackJsonp([45],{"93Qa":function(t,e){},TL5K:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEzUlEQVRYR+VXbYgVZRR+zsxVl/y4dwY1kdTcvXOlUovQMpMkUbcooT8pWYZFtrszKokSfYAfP4qiMjPuXNdKURHKgkBSK4sS0woNti+xO3d3kUArZeaumdleZ56Yayvr3bl312t/ovfPwJxznud5z3vOO2cEV7D0dG5dGO5aySeqhZFqA8M43c7uBUHXSs2uFue/JSBuH9NUFO4nOE3IyRQZJ4AQPAXgOCDfMcB7+eGdezD3hs6+ZKVPGYhvaJ2kBP4qQO4W8hxEdgfCL4SyUIAAlJcorAUQHsV0IU+AssxdbOzoTURlAenfBmnSsU2A+0BkA+ELeXXQO2gYeTYETmScR8NnvsnY1EUUt7O1KrCSkIcB7vKYeADW8DPlhJQVoK93roHKvYSMBWSFN6wug7ni97ajLrtuO1NIfiDASUCZ7VrJn6NiowU0s5/mO4cA0eEr93hL6r7vK3F3vyEbWo2YH+wH6MKXKe5S43QpTqQA3XZeJbEwiGFSR4PRWg15V4z2eusEUfwvARyMatceAjS7bSLgtwDKHM+s23Ul5BePI52bB+HbCDCvtDAjBDgHBIy5ZurWf4P8YibS2X0QGes1JcdAhF3vLxGQ2NB2oxL4LYRyb6+7X+8MSKi8rtgFwwpHeuv7eCY3QyU/9aHM6jDrPokUoKVzL0K4yBuaHFap4jXbsQR4GUBNEYj4kwqWe01GpmzWSNHt3AkIdrumUWzfcF2SAd12DpPMelZqfjkgzc42CqQMkTS4ZnJj+VhnO4CJnmlMiM6Ane0ElTWelXwuEuSto4P1c8oJiAyMspPIe4iPKnfxJGxnpRDPeJZxIXNhBjQ7lwGKZ9lPgKkAfwJko2saa0tJ4nbrTBXB3krFGQjuzDcZn5f66OnccoCPQ5AicBBAAcSPotmODeB6ADEBbi8KoPKGayVfKQVJ2M50BegB3t2PUO/wzNr9EQJWQILHABlH4ACA8wCOXFIDmu2cB2VV2SPY3F6jnS38LiKxMkfwl3cyOQirJQTvsfS0s5rCpz0zNaBMFzg/AGjxLOOhcmlOZJwFCrG11M6wF4gFnmWEhRa5NNt5X4BRrmlMihSg284mELNcMzm6+2VRiha2IcC1Aukf2gh2gljqWanmsvWxub1GP1s4SZG0ZxpPRQvIOPUgPgwoM/JW8rNKxTYw3T5iAPw5gUK/EFN3/bGo9tdK/pqdnS+Q7YGi3pRvrP02UgB2UNVO5dqEdFwrNbMS4OXadDt7lJBTnmlM6x7b41ugV/hwXC5pl79mO2FNbSV5c95KtVQUEBr1dPZjAFMZqLdVOwtcJM/kxksQfAUob0aN79HzwHpnCFV8I8BgqJjhNhpHqtn9kEzbLbHA30nhL55qTEaDFEpxyo5kWnPraDnvf0TICJ+86/Ti1Nd9FrGaMW24swzE8wLkLn8k62K6MJTuAFEvwm2+339Nx5Jr27vMCTv7CKAEeTO5pfiu+fhVCf/MPIE8K0AdgZ0e4w9WNZR2322xMMF1FFwNYB/IPQLlGMEni/eAwi1KgOkA6ilSA3BPoKhrOhrrDveWtT79FxRBwgEkhnoBQjHjAYwUyNDwBhQwS8ghgez30e/dDnOM1xtx9D3Q16h//P5//4alCdLT2dcAhVfye/43rCEQbW7ATqgAAAAASUVORK5CYII="},UM62:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),o=(a("63CM"),a("ABCa")),r=a("2sLL"),s=a("rHil"),c=a("1DHf"),d=a("ODCk"),l=a("ALGc"),A=(o.a,r.a,s.a,c.a,l.a,{name:"Check",components:{XHeader:o.a,XButton:r.a,Group:s.a,Cell:c.a,XTextarea:l.a},mounted:function(){this.setMap()},data:function(){return{buttonAble:!1,distance:"",formData:{ID:0,SigninTime:Object(d.a)(new Date,"YYYY-MM-DD HH:mm:ss"),Province:"",City:"",District:"",Street:"",Address:"",MapLng:0,MapLat:0,Remark:""}}},methods:{setMap:function(t){t&&(this.formData.Province=t.address.province,this.formData.City=t.address.city,this.formData.District=t.address.district,this.formData.Street=t.address.street+t.address.streetNum,this.formData.Address=t.addresses,this.formData.MapLng=t.coords.longitude,this.formData.MapLat=t.coords.latitude);var e=new BMap.Map("container"),a=new BMap.Point(117.144192,36.666896),i=new BMap.Point(117.140192,36.666896),n=new BMap.Marker(a),o=new BMap.Marker(i);if(this.distance=e.getDistance(a,i),this.distance<300){var r={position:i,offset:new BMap.Size(-45,-50)},s=new BMap.Label("已经入考勤范围",r);s.setStyle({color:"blue",fontSize:"12px",height:"20px",lineHeight:"20px",fontFamily:"微软雅黑"}),e.addOverlay(s)}var c=new BMap.Circle(a,400,{strokeColor:"blue",strokeWeight:.8,strokeOpacity:.2});e.addOverlay(n),e.addOverlay(o),e.addOverlay(c),e.centerAndZoom(a,16),e.disableDragging()},getLocation:function(){var t=this;window.plus&&plus.geolocation.getCurrentPosition(function(e){t.setMap(e)},function(t){alert("定位失败，请检查网络"),console.log(n()(t))},{geocode:!0,coordsType:"bd09ll",provider:"baidu"})},reLocation:function(){this.getLocation()},checkIn:function(){var t=this,e=this;if(!this.formData.MapLng&&!this.formData.Address)return this.$vux.toast.show({text:"请先进行定位",position:"middle",type:"warn"}),!1;if(!this.formData.Address)return this.$vux.toast.show({text:"请先定位获取地址",position:"middle",type:"warn"}),!1;var a=this.formData;a.ImageAttach.map(function(t){t.ID=0,t.FileSize=100,t.FileType=1}),this.buttonAble=!0,this.postAxios("/Work/SaveCrmWorkSignin",a).then(function(a){1==a.State&&t.$vux.toast.show({text:"签到成功！",position:"middle",type:"success",onHide:function(){e.$router.back()}})}).catch(function(e){t.buttonAble=!1,t.$vux.toast.show({text:e.ErrorMessage,position:"middle",type:"cancel",onHide:function(){this.buttonAble=!1}}),console.log(n()(e))})}}}),u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"addressMap"},[i("x-header",{ref:"addressmapHeader",attrs:{title:"考勤打卡"}}),t._v(" "),i("group",[i("div",{attrs:{id:"container"},nativeOn:{click:function(e){return t.returnFalse(e)}}}),t._v(" "),i("cell",{attrs:{title:"当前"},nativeOn:{click:function(e){return t.reLocation(e)}}},[i("img",{staticStyle:{display:"block","margin-right":"5px"},attrs:{slot:"icon",width:"20",src:a("TL5K")},slot:"icon"}),t._v(" "),i("span",[t._v(t._s(t.formData.Address))])]),t._v(" "),i("x-textarea",{attrs:{title:"备注"},model:{value:t.formData.Remark,callback:function(e){t.$set(t.formData,"Remark",e)},expression:"formData.Remark"}})],1),t._v(" "),i("group",{staticStyle:{position:"fixed",width:"100%",bottom:"0"}},[i("x-button",{attrs:{type:"primary",disabled:t.buttonAble},nativeOn:{click:function(e){return t.checkIn(e)}}},[t._v("签到")])],1)],1)])},staticRenderFns:[]};var f=a("VU/8")(A,u,!1,function(t){a("93Qa")},"data-v-1d08d766",null);e.default=f.exports}});
//# sourceMappingURL=45.b2d8e72bb9999a1fbaea.js.map