webpackJsonp([12],{"+JHg":function(t,e){},"0tE7":function(t,e,o){"use strict";var i=o("GQaK"),s=(Number,Number,Number,Boolean,String,Boolean,Boolean,Number,Number,Boolean,String,Boolean,Boolean,Number,{props:{height:{type:Number,default:667},width:{type:Number,default:175},probeType:{type:Number,default:2},click:{type:Boolean,default:!0},direction:{type:String,default:"vertical"},scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:null,default:!1},pullDownRefresh:{type:null,default:!1},pullUpLoad:{type:null,default:!1},startY:{type:Number,default:0},startX:{type:Number,default:0},freeScroll:{type:Boolean,default:!1},eventPassthrough:{type:String,default:""},listenScroll:{type:Boolean,default:!1},listenBeforeScroll:{type:Boolean,default:!1},toScrollY:{type:Number,default:0}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},methods:{initScroll:function(){var t=this;if(this.$refs.wrapper){var e={probeType:this.probeType,click:this.click,scrollX:"horizontal"===this.direction,scrollY:"vertical"===this.direction,scrollbar:this.scrollbar,pullDownRefresh:this.pullDownRefresh,pullUpLoad:this.pullUpLoad,startX:this.startX,startY:this.startY,freeScroll:this.freeScroll,eventPassthrough:this.eventPassthrough};this.$refs.wrapper.style.height=this.height,this.$refs.wrapper.style.width=this.width,this.scroll=new i.a(this.$refs.wrapper,e),this.listenScroll&&this.scroll.on("scroll",function(e){t.$emit("scroll",e)}),this.listenBeforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforeScrollStart")}),this.pullDownRefresh&&console.log("下拉刷新"),this.pullUpLoad&&this._initPullUpLoad(),this.scroll.on("scroll",function(e){t.toScrollYs=Math.abs(Math.round(e.y)),t.$emit("scroll")})}},_initPullUpLoad:function(){var t=this;this.scroll.on("pullUpLoad",function(){t.pullUpLoad=!0,t.$emit("pullUpLoadFun")})},refresh:function(){console.log(this.width),this.$refs.wrapper.style.height=this.height,this.$refs.wrapper.style.width=this.width,this.scroll&&this.scroll.refresh()}},watch:{toScrollY:function(){this.scroll.scrollTo(0,-this.toScrollY,300)}}}),n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"wrapper",staticClass:"simple-scroll"},[this._t("default")],2)},staticRenderFns:[]};var r=o("VU/8")(s,n,!1,function(t){o("x5+v")},"data-v-95e4679a",null);e.a=r.exports},KD5p:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),s=o.n(i),n=o("//Fk"),r=o.n(n),a=o("Dd8w"),l=o.n(a),c=o("1DHf"),d=o("rHil"),u=o("ABCa"),h=o("HqzV"),p=o("pDNl"),f=o("oWtu"),b=o("2sLL"),g=o("0tE7"),m=o("NYxO"),A=(l()({},Object(m.c)(["getCustomerArea"])),u.a,d.a,c.a,g.a,h.a,p.a,f.a,b.a,{beforeRouteLeave:function(t,e,o){this.$vux.loading.hide(),o()},mounted:function(){var t=this;this.$bus.on("reOpenMap",function(){setTimeout(function(){t.openMap()},200)}),this.lat=this.$route.query.lat||"",this.lng=this.$route.query.lng||"",this.openMap();var e=document.body.clientWidth,o=document.body.clientHeight;this.scrollW=e;this.scrollH=o-280-48-76,(!this.scrollH||this.scrollH<0)&&(this.scrollH=350)},data:function(){return{geolocation:"",geoc:"",poiList:[],scrollW:0,scrollH:0,map:{},mk:"",point:"",market:!1,lat:"",lng:"",localSearch:"",localSearchResult:"",mapLabel:"",local:"",myKeys:["产业园","路","厦"],initPoint:[]}},computed:l()({},Object(m.c)(["getCustomerArea"])),methods:{back:function(){this.$vux.loading.hide(),this.$router.back()},inital:function(){this.map.centerAndZoom(this.initPoint,15)},openMap:function(){this.$vux.loading.show({text:"地图加载中..."}),BMap||(this.$vux.loading.hide(),this.$vux.toast.show({text:"地图加载失败"}));var t=new BMap.Map("container"),e=new BMap.Geolocation,o=new BMap.Geocoder;this.map=t,this.geolocation=e,this.geoc=o;var i=this;if(this.lat&&this.lng){this.$vux.loading.hide();var s=new BMap.Point(this.lng,this.lat);this.initPoint=s,s&&(t.centerAndZoom(s,15),i.market=!0,t.panTo(s),i.showLabelAndLocal(s))}else""!==this.getCustomerArea.province?(this.$vux.loading.hide(),o.getPoint(this.getCustomerArea.province+this.getCustomerArea.city+this.getCustomerArea.area,function(e){i.point=e,i.initPoint=e,e&&(t.centerAndZoom(e,15),i.market=!0,t.panTo(e),i.showLabelAndLocal(e))})):(this.$vux.loading.hide(),e.getCurrentPosition(function(e){i.point=e.point,i.initPoint=e.point,this.getStatus()===BMAP_STATUS_SUCCESS?(t.centerAndZoom(e.point,15),t.panTo(e.point),i.market=!0,i.showLabelAndLocal(e.point)):alert("failed"+this.getStatus())},{enableHighAccuracy:!0}));t.addEventListener("moveend",function(){var e=t.getCenter();i.$refs.input.blur(),i.showLabelAndLocal(e)})},selectAddress:function(t){this.$bus.emit("selectAddCustomerAddress",{point:t.point,title:t.title,address:t.address,city:t.city,province:t.province,district:t.district?t.district:"",seleType:this.$route.query.seleAdressType}),this.$router.back()},selectCurrentPoint:function(){var t=this,e=this.map.getCenter();t.geoc.getLocation(e,function(e){var o={};o.point=e.point,o.title="",o.address=e.address,o.province=e.addressComponents.province,o.city=e.addressComponents.city,o.district=e.addressComponents.district,t.selectAddress(o)})},selectNearbyAddress:function(t){var e=this,o=t.point;e.geoc.getLocation(o,function(o){var i={};i.point=o.point,i.title=t.title,i.address=t.address,i.province=o.addressComponents.province,i.city=o.addressComponents.city,i.district=o.addressComponents.district,e.selectAddress(i)})},showLabelAndLocal:function(t){var e=this;this.geoc.getLocation(t,function(o){e.mapLabel?e.mapLabel.setContent(o.address):(e.mapLabel=new BMap.Label(o.address,{position:t}),e.map.addOverlay(e.mapLabel)),e.mapLabel.setPosition(t),o.surroundingPois&&o.surroundingPois.length>0?e.poiList=o.surroundingPois:e.poiList=[]})},gotoSearch:function(){var t=this,e=new BMap.LocalSearch(this.map,{onSearchComplete:function(e){if(e.Ar.length>0){var o=e.Ar;t.poiList=o,t.map.centerAndZoom(t.poiList[0].point,16)}else t.poiList=[]}});this.localSearch?e.search(this.localSearch):this.$vux.toast.show({text:"请输入要搜索的地址",position:"middle",type:"warn"})},setMapLocation:function(t,e){var o=new BMap.Point(t,e);this.map.centerAndZoom(o,15),this.map.panTo(o),this.market=!0,this.showLabelAndLocal(o)},geoLngLatToBaidu:function(t,e,o){var i="http://api.map.baidu.com/geoconv/v1/?coords="+t+","+e+"&output=json&from="+("gcj02"==o?3:1)+"&to=5&ak=W6WIQmkWMM7fHZ1bQzONDGwimUikfaPU";return new r.a(function(t,e){jsonp(i,null,function(e,o){e?console.error(e.message):o&&0==o.status&&t({lng:o.result[0].x,lat:o.result[0].y})})})},getLocation:function(){var t=this,e=this,o={coords:{},address:{}};"iOS"==plus.os.name?plus.geolocation.getCurrentPosition(function(i){e.geoLngLatToBaidu(i.coords.longitude,i.coords.latitude,i.coordsType).then(function(e){o.coords.longitude=e.lng,o.coords.latitude=e.lat,t.setMapLocation(o.coords.longitude,o.coords.latitude)})},function(t){alert("定位失败，请检查网络"),console.log(s()(t))}):plus.geolocation.getCurrentPosition(function(e){e.address.address=e.address.street,t.setMapLocation(e.coords.longitude,e.coords.latitude)},function(t){alert("定位失败，请检查网络"),console.log(s()(t))},{provider:"baidu",geocode:!0,coordsType:"bd09ll"})}},components:{XHeader:u.a,Group:d.a,Cell:c.a,Scroll:g.a,Search:h.a,XInput:p.a,Icon:f.a,XButton:b.a}}),v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"addressMap"},[i("x-header",{ref:"addressmapHeader",attrs:{title:"选择地址","right-options":{showMore:!1},"left-options":{showBack:!0,preventGoBack:!0,backText:""}},on:{"on-click-back":t.back}}),t._v(" "),i("div",{attrs:{id:"container"}}),t._v(" "),i("i",{staticClass:"iconfont icon-dingwei",on:{click:t.inital}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:t.market,expression:"market"}],attrs:{src:o("tUsR"),alt:"",id:"map-market-icon"}}),t._v(" "),i("group",{attrs:{gutter:"0"}},[i("x-input",{ref:"input",attrs:{placeholder:"输入关键字检索地图"},model:{value:t.localSearch,callback:function(e){t.localSearch=e},expression:"localSearch"}},[i("icon",{staticStyle:{"padding-left":"10px","line-height":"16px","vertical-align":"middle"},attrs:{slot:"right",type:"search"},nativeOn:{click:function(e){return t.gotoSearch(e)}},slot:"right"})],1)],1),t._v(" "),i("p",{ref:"nearbyAddress",staticClass:"nearby-address"},[t._v("请选择地址 ")]),t._v(" "),i("scroll",{staticClass:"scroll",attrs:{width:t.scrollW,height:t.scrollH,id:"result"}},[i("group",{attrs:{gutter:"0"}},[t._l(t.poiList,function(e,o){return i("cell",{key:o,attrs:{title:e.title,"inline-desc":e.address},nativeOn:{click:function(o){t.selectNearbyAddress(e)}}})}),t._v(" "),i("cell",{directives:[{name:"show",rawName:"v-show",value:0==t.poiList.length,expression:"poiList.length==0"}],attrs:{title:"暂时无法搜索到相关地址，请重新搜索或"}},[i("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.selectCurrentPoint(e)}}},[t._v("使用当前位置")])],1)],2)],1),t._v(" "),i("router-view")],1)])},staticRenderFns:[]};var Q=o("VU/8")(A,v,!1,function(t){o("+JHg")},"data-v-a7207e34",null);e.default=Q.exports},tUsR:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABQCAMAAABs3dbSAAABFFBMVEUAAAAAAAAAAAD1Qzb1Qzb1QzYAAAD1Qzb1QzYAAAD1Qzb1Qzb1Qzb1Qzb1QzYEAQH1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1QzYAAAD1QzYAAAAAAAD1Qzb1Qzb1QzbqQDP1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1QzYAAADuQTX1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1Qzb1QzYAAAD1QzbmPzPfPTH1Qzb1QzaUKCF8IhtoHBf1Qzb////1STz+9fT8wr77t7P7sq37rKb/+/r+7ez939392tj7u7b4dmz3bGL3aF33Y1j2UEP2TUD+5OL94d/91NH909BwDHMyAAAARXRSTlMAJiL98OQclxwNAvbMWhYSDQbauXwk69K9sq6jiGtRRRYLCgf439bLqpqTNzQxLiETBd7IwrV4dGdhPSgg3LuooI1OQyFlHrCLAAACY0lEQVRIx63W53LaQBSG4aOCQKJXgzEx4N574pKefNhgx3F3yv3fR+RgyUhnpV3N+Jnh5zs6u+yC6FVkjlarH0wD5kIzfVgnqXqtgoCFmROKszFtgKseR0/UNiDW2iKhvIlI2Q5x5RXEmi5RSKkJiVwhVOQgVQk05SYU5CZnW4GSA4c8eSh66xUFE4rmvfPThrLquNg0oG6WniwjgX1ybRlIYt1NahA6PYXQqpssgrsdXQ4Gl6NbcA2HMoIHjAbPRoJHbVCeF38Gvr+8eUdfEHY+mHCOsGU6QMj9IOAeIVN89RfB5AIhJqUQ8juY/EQYsSP5I5icvUbCB/slGcygCttjyfIbtI+Qu2Byh5CK4NpfTxbXCGtRhx+Yq5fiih+YGdoA8zj0iuGj6F46DXA3wzN3e4c34LIlojSEHh4gNE1Ex0jkDblySCBVlv5W8gv2xEnwmIUy/bdmJFnJWBqKWuTpLSquvUC+ugkF2XWaMGtAyshTQEf9/8hXg0SaGMm2LTvEOG3EaJZJoFxFpL0eCfX2EGGqQBG2pyCUylCkTAoC5ibF2MyCmZ+lWHmDJR2SSPPLLtOrsNMrtWbwS5VotBap2DYndmuLJNihXiU1pYZ/DzOkaMZLPpOqjOG/Fimrem8F6o7GSY3UbY8nO6EEcnCliJHtWZuSeAPXISVRh2uNlO307WLWTb4X7f4OSc0VLV1z7QKm9kS3un2KUdS1Z0vArubRi5EDvdd8n4CP2gt9joTcwvdtaemrNtmQkBbHEa8kpuiSmK1HBLpNkfoWr3TLln0zdteydF3X3I9ldW22V/8AEwJYvcg9S3UAAAAASUVORK5CYII="},"x5+v":function(t,e){}});
//# sourceMappingURL=12.d369ee6d05c99b3fec60.js.map