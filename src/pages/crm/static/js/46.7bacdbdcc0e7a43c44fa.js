webpackJsonp([46],{"9OqH":function(t,e){},rLos:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Gu7T"),o=s.n(a),i=s("Dd8w"),n=s.n(i),r=s("NYxO"),l=s("YxJB"),c=s("3Lt7"),u=s("ABCa"),p=s("rHil"),f=s("pDNl"),h=s("2sLL"),d=s("cq2Q"),g=s("8pLc"),m=(n()({},Object(r.d)(["setIsMyClient"]),{getClient:function(t){var e=this;this.$vux.confirm.show({content:"确定领取该客户？",onConfirm:function(){var s=JSON.parse(localStorage.getItem("user")),a=s?s.data.UserID:204;e.postAxios("/Customer/SetCustomerOwner?SaleChief="+a+"&type=1",[t]).then(function(t){e.$vux.toast.show({type:"success",text:"领取成功"}),e.getData(1,1)})}})},getData:function(t,e){var s=this;this.$vux.loading.show({text:"加载中"}),this.params.page=e||this.params.page,this.getAxios("/Customer/GetCompCustomerList?isOwner=1",this.params).then(function(e){s.$vux.loading.hide(),e.Data.List.length>0?(2===t?(s.clientList=[].concat(o()(s.clientList),o()(e.Data.List)),s.$refs.scroll.scroll.finishPullUp()):(s.clientList=e.Data.List,s.$refs.scroll.scroll.finishPullDown(),s.$refs.scroll.scrollTo(0,0),s.$refs.scroll.forceUpdate(!0)),s.params.page+=1,s.$refs.scroll.refresh()):1==t?(s.clientList=[],s.$refs.scroll.forceUpdate()):s.$refs.scroll.forceUpdate()}).catch(function(t){s.$vux.loading.hide(),console.log(t)})},goto:function(t,e){this.$router.push({path:t,query:{id:e,isCom:!0}})}}),l.a,c.a,u.a,d.a,p.a,f.a,g.a,h.a,{data:function(){return{clientList:[],params:{customerName:"",beginDate:"",endDate:"",page:1,count:10},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},isSort:!1}},methods:n()({},Object(r.d)(["setIsMyClient"]),{getClient:function(t){var e=this;this.$vux.confirm.show({content:"确定领取该客户？",onConfirm:function(){var s=JSON.parse(localStorage.getItem("user")),a=s?s.data.UserID:204;e.postAxios("/Customer/SetCustomerOwner?SaleChief="+a+"&type=1",[t]).then(function(t){e.$vux.toast.show({type:"success",text:"领取成功"}),e.getData(1,1)})}})},getData:function(t,e){var s=this;this.$vux.loading.show({text:"加载中"}),this.params.page=e||this.params.page,this.getAxios("/Customer/GetCompCustomerList?isOwner=1",this.params).then(function(e){s.$vux.loading.hide(),e.Data.List.length>0?(2===t?(s.clientList=[].concat(o()(s.clientList),o()(e.Data.List)),s.$refs.scroll.scroll.finishPullUp()):(s.clientList=e.Data.List,s.$refs.scroll.scroll.finishPullDown(),s.$refs.scroll.scrollTo(0,0),s.$refs.scroll.forceUpdate(!0)),s.params.page+=1,s.$refs.scroll.refresh()):1==t?(s.clientList=[],s.$refs.scroll.forceUpdate()):s.$refs.scroll.forceUpdate()}).catch(function(t){s.$vux.loading.hide(),console.log(t)})},goto:function(t,e){this.$router.push({path:t,query:{id:e,isCom:!0}})}}),mounted:function(){var t=this;this.setIsMyClient(!1),this.getData(),this.$bus.on("init",function(){t.getData()})},beforeRouteLeave:function(t,e,s){"/"==t.path&&this.setIsMyClient(!0),s()},components:{Flexbox:l.a,FlexboxItem:c.a,XHeader:u.a,Scroll:d.a,Group:p.a,XInput:f.a,NoData:g.a,XButton:h.a}}),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"cList"},[s("x-header",{attrs:{"left-options":{backText:""}}},[t._v("公共客户")]),t._v(" "),s("group",{staticClass:"pt48 client_query",staticStyle:{background:"#fff","padding-top":"46px"},attrs:{gutter:"0"}},[s("x-input",{attrs:{placeholder:"请输入客户名称"},on:{"on-enter":function(e){t.getData(1,1)}},model:{value:t.params.customerName,callback:function(e){t.$set(t.params,"customerName","string"==typeof e?e.trim():e)},expression:"params.customerName"}})],1),t._v(" "),s("scroll",{ref:"scroll",staticClass:"list-wrap",attrs:{pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown,background:"#F0F2FF"},on:{pullingUp:function(e){t.getData(2)},pullingDown:function(e){t.getData(1,1)}}},[s("ul",t._l(t.clientList,function(e,a){return s("li",{key:a,on:{click:function(s){t.goto("/commonClient/clientDetails",e.ID)}}},[s("h3",[s("span",{staticStyle:{"max-width":"200px"}},[s("i",{staticClass:"iconfont icon-gongsi-",staticStyle:{"margin-right":"4px",color:"#1e9fff"}}),t._v("\n              "+t._s(e.CustomerName)+"\n            ")]),t._v(" "),s("span",[s("span",{staticStyle:{"vertical-align":"middle","font-size":"12px",color:"#DFB797"}},[t._v(t._s(e.CustStateName))]),t._v(" "),s("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right",attrs:{type:"ios-arrow-right",size:"20",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512"}},[s("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])])]),t._v(" "),s("div",{staticClass:"get"},[s("div",[s("p",{staticClass:"body_p"},[t._v("所在城市 | "+t._s(e.Province+e.City+e.District))]),t._v(" "),s("p",{staticClass:"body_p"},[s("span",[t._v("联系人 | "+t._s(e.LinkName))])]),t._v(" "),s("p",{staticClass:"body_p"},[t._v("手机号 | "+t._s(e.LinkPhone))])])]),t._v(" "),s("p",{staticStyle:{"font-size":"12px",color:"#DADADA"}},[t._v("所有者："+t._s(e.SaleChiefName))])])})),t._v(" "),0==t.clientList.length?s("no-data"):t._e()],1),t._v(" "),s("router-view")],1)])},staticRenderFns:[]};var x=s("VU/8")(m,v,!1,function(t){s("9OqH")},"data-v-85d75de8",null);e.default=x.exports}});
//# sourceMappingURL=46.7bacdbdcc0e7a43c44fa.js.map