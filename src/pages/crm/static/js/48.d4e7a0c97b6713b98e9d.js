webpackJsonp([48],{qhpj:function(t,s){},xAPd:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Gu7T"),o=e.n(a),r=e("oqQY"),i=e.n(r),n=(e("NYxO"),e("YxJB")),c=e("3Lt7"),l=e("ABCa"),p=e("rHil"),h=e("pDNl"),u=e("8pLc"),d=e("cq2Q"),f=e("rUbY"),m=(n.a,c.a,l.a,d.a,p.a,h.a,u.a,f.a,{name:"costList",props:{cId:{default:"0"}},data:function(){return{costList:[],params:{customerId:0,customerName:"",page:1,count:10,createUserId:this.$store.state.CurrentUserID,startCostDate:"",endCostDate:"",costType:0,costClassId:0},pullUp:{threshold:0,txt:{more:"加载更多",noMore:"没有更多了"}},pullDown:{threshold:50,stop:20},isSort:!1,noPt:!1,formatDate:"YYYY-MM-DD",dateTiele:"收支日期",filterArr:[{type:0,name:"收支类型",init:0,notDict:!0,list:[{types:"收支类型",ID:0,name:"全部"},{types:"收支类型",ID:1,name:"收入"},{types:"收支类型",ID:2,name:"支出"}]},{type:22,name:"费用名称"}]}},methods:{dateQuery:function(t){t.beginDate?(this.params.startCostDate=t.beginDate+" 00:00:00",this.params.endCostDate=t.endDate+" 23:59:59"):(this.params.startCostDate="",this.params.endCostDate=""),this.getData(1,1)},selectedParams:function(t){"收支类型"==t.types&&(this.params.costType=t.ID,this.getData(1,1),this.$refs.scroll.scrollTo(0,0,200)),22==t.DictType&&(this.params.costClassId=t.ID,this.getData(1,1),this.$refs.scroll.scrollTo(0,0,200))},clearType:function(){this.params.costType=0,this.params.costClassId=0,this.getData(1,1)},getData:function(t,s){var e=this,a="/Cost/GetMyCostRecord";0!=this.cId&&(a="/Cost/GetPagedCrmCostRecord"),this.$vux.loading.show({text:"加载中"}),this.params.page=s||this.params.page,this.cId&&(this.params.customerId=this.cId),this.getAxios(a,this.params).then(function(s){e.$vux.loading.hide(),s.Data.List.length>0?(s.Data.List.forEach(function(t){t.CostDate=i()(t.CostDate).format("YYYY-MM-DD")}),2===t?(e.costList=[].concat(o()(e.costList),o()(s.Data.List)),e.$refs.scroll.scroll.finishPullUp()):(e.costList=s.Data.List,e.$refs.scroll.scroll.finishPullDown()),e.params.page+=1,e.$refs.scroll.refresh()):1==e.params.page?(e.costList=[],e.$refs.scroll.forceUpdate()):e.$refs.scroll.forceUpdate()}).catch(function(t){e.$vux.loading.hide()})},init:function(){this.getData(1,1)},goto:function(t,s){this.$router.push({path:t,query:{id:s}})},newCost:function(){this.goto("/cost/newCost")},gotoInfo:function(t){t.OrderNumber?this.goto("/cost/receiveInfo/"+t.ReturnID):0!=this.cId?this.goto("clientDetails/costInfo/"+t.ID):this.goto("/cost/costInfo/"+t.ID)},gotoIndex:function(){this.goto("/")},selectedUser:function(t){this.params.createUserId=t,this.getData(1,1)}},mounted:function(){var t=this;console.log(this.$route.params.perxObj);var s=this.$route.params.perxObj;s&&(s.createUserId&&(this.params.createUserId=s.createUserId),s.startCostDate&&(this.params.startCostDate=s.startCostDate),s.endDendCostDateate&&(this.params.endCostDate=s.endDendCostDateate),(s.costClassId||s.classID)&&(this.params.costClassId=s.costClassId||s.classID),"支出"==s.type&&(this.params.costType=2)),this.getData(),this.$bus.on("refrechCostList",function(){t.getData(1,1)})},beforeDestroy:function(){this.$bus.off("refrechCostList")},filters:{getPicSrc:function(t){return apiPic+"/dXNlci9sb2dv_"+t+"_35x35.png"}},watch:{costList:function(){var t=this;setTimeout(function(){t.$refs.scroll.forceUpdate(!0)},500)}},beforeRouteLeave:function(t,s,e){"/newCost"!=t.path&&"/costInfo"!=t.path?(s.meta.keepAlive=!1,e()):e()},components:{Flexbox:n.a,FlexboxItem:c.a,XHeader:l.a,Scroll:d.a,Group:p.a,XInput:h.a,NoData:u.a,Query:f.a}}),D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"costList"},[0==this.cId?e("x-header",{attrs:{"left-options":{backText:""}}},[t._v("我的账本\r\n            "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus-empty icon",attrs:{slot:"right",type:"ios-plus-empty",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"},on:{click:function(s){t.newCost()}},slot:"right"},[e("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]):t._e(),t._v(" "),0==this.cId?e("query",{attrs:{types:t.filterArr,formatDate:t.formatDate,dateTitle:t.dateTiele},on:{dateQuery:t.dateQuery,selectedParams:t.selectedParams,clearType:t.clearType,selectedUser:t.selectedUser}}):t._e(),t._v(" "),e("scroll",{ref:"scroll",attrs:{background:"#F0F2FF",pullUpLoad:t.pullUp,pullDownRefresh:t.pullDown},on:{pullingUp:function(s){t.getData(2)},pullingDown:function(s){t.getData(1,1)}}},[e("ul",{staticClass:"clist-ul"},t._l(t.costList,function(s,a){return e("li",{key:a,on:{click:function(e){t.gotoInfo(s)}}},[e("div",{staticStyle:{width:"15%",float:"left"}},[e("img",{attrs:{src:t._f("getPicSrc")(s.CreateUserID),alt:""}})]),t._v(" "),e("div",{staticStyle:{width:"85%",float:"left"}},[e("h3",[e("span",{staticStyle:{width:"60%"}},[t._v(t._s(s.CreateUserName))]),t._v(" "),e("span",{staticStyle:{color:"#409eff"}},[e("span",{class:{fontcoler:s.CostType-1}},[1==s.CostType?e("span",[t._v("+")]):t._e(),t._v(" "),2==s.CostType?e("span",[t._v("-")]):t._e(),t._v(t._s(s.CostMoney)+"\r\n                                ")])])]),t._v(" "),e("h4",[e("span",[t._v("收支日期: "+t._s(s.CostDate))]),t._v(" "),e("span",{staticStyle:{float:"right"}},[t._v(t._s(s.CostClassName))])]),t._v(" "),e("p",[e("span",[t._v("关联客户: "+t._s(s.CustomerName))]),t._v(" "),s.CustomerName?t._e():e("span",[t._v("无")]),t._v(" "),s.LinkUserName?e("span",[t._v("| "+t._s(s.LinkUserName))]):t._e()]),t._v(" "),s.CustomerName?e("p",[e("span",[t._v("客户所有者: "+t._s(s.SaleChiefName)+"\r\n                                ")])]):t._e()]),t._v(" "),s.OrderNumber?e("P",{staticStyle:{color:"#666"}},[e("span",{staticStyle:{color:"#666"}},[t._v("[通过回款自动生成的费用收支]")])]):t._e(),t._v(" "),s.Description?e("p",{staticStyle:{color:"#666"}},[e("span",{staticStyle:{color:"#888"}},[t._v(t._s(s.Description))])]):t._e(),t._v(" "),e("p",{staticStyle:{height:"1px","line-height":"1px"}}),t._v(" "),e("div",{staticStyle:{height:"1px",clear:"both"}})],1)})),t._v(" "),0==t.costList.length?e("no-data"):t._e()],1),t._v(" "),e("router-view",{staticStyle:{position:"fixed",top:"0",bottom:"0","z-index":"502",left:"0",right:"0",background:"#fff"}})],1)])},staticRenderFns:[]};var v=e("VU/8")(m,D,!1,function(t){e("qhpj")},"data-v-743b489c",null);s.default=v.exports}});
//# sourceMappingURL=48.d4e7a0c97b6713b98e9d.js.map