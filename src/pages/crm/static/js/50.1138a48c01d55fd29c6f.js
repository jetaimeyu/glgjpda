webpackJsonp([50],{"0g3g":function(t,a){},"9Vmj":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),s=e("//Fk"),o=e.n(s),r=e("ABCa"),c=e("rHil"),h=e("1DHf"),l=e("kNDc"),u=e("LgOF"),d=e("2FOq"),p=e("2sLL"),g=e("lzuW"),f={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,a){var e=6378245,n=.006693421622965943,i=this.transformLat(a-105,t-35),s=this.transformLng(a-105,t-35),o=t/180*this.PI,r=Math.sin(o);r=1-n*r*r;var c=Math.sqrt(r);return{lat:i=180*i/(e*(1-n)/(r*c)*this.PI),lng:s=180*s/(e/c*Math.cos(o)*this.PI)}},gcj_encrypt:function(t,a){if(this.outOfChina(t,a))return{lat:t,lng:a};var e=this.delta(t,a);return{lat:t+e.lat,lng:a+e.lng}},gcj_decrypt:function(t,a){if(this.outOfChina(t,a))return{lat:t,lng:a};var e=this.delta(t,a);return{lat:t-e.lat,lng:a-e.lng}},gcj_decrypt_exact:function(t,a){for(var e,n,i=.01,s=.01,o=t-i,r=a-s,c=t+i,h=a+s,l=0;;){e=(o+c)/2,n=(r+h)/2;var u=this.gcj_encrypt(e,n);if(i=u.lat-t,s=u.lng-a,Math.abs(i)<1e-9&&Math.abs(s)<1e-9)break;if(i>0?c=e:o=e,s>0?h=n:r=n,++l>1e4)break}return{lat:e,lng:n}},bd_encrypt:function(t,a){var e=a,n=t,i=Math.sqrt(e*e+n*n)+2e-5*Math.sin(n*this.x_pi),s=Math.atan2(n,e)+3e-6*Math.cos(e*this.x_pi),o=i*Math.cos(s)+.0065;return{lat:i*Math.sin(s)+.006,lng:o}},bd_decrypt:function(t,a){var e=a-.0065,n=t-.006,i=Math.sqrt(e*e+n*n)-2e-5*Math.sin(n*this.x_pi),s=Math.atan2(n,e)-3e-6*Math.cos(e*this.x_pi),o=i*Math.cos(s);return{lat:i*Math.sin(s),lng:o}},mercator_encrypt:function(t,a){var e=20037508.34*a/180,n=Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180);return{lat:n=20037508.34*n/180,lng:e}},mercator_decrypt:function(t,a){var e=a/20037508.34*180,n=t/20037508.34*180;return{lat:n=180/this.PI*(2*Math.atan(Math.exp(n*this.PI/180))-this.PI/2),lng:e}},distance:function(t,a,e,n){var i=Math.cos(t*this.PI/180)*Math.cos(e*this.PI/180)*Math.cos((a-n)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(e*this.PI/180);return i>1&&(i=1),i<-1&&(i=-1),6371e3*Math.acos(i)},outOfChina:function(t,a){return a<72.004||a>137.8347||(t<.8293||t>55.8271)},transformLat:function(t,a){var e=2*t-100+3*a+.2*a*a+.1*t*a+.2*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,e+=2*(20*Math.sin(a*this.PI)+40*Math.sin(a/3*this.PI))/3,e+=2*(160*Math.sin(a/12*this.PI)+320*Math.sin(a*this.PI/30))/3},transformLng:function(t,a){var e=300+t+2*a+.1*t*t+.1*t*a+.1*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,e+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,e+=2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3}},v=(g.a,r.a,c.a,h.a,l.a,u.a,d.a,p.a,{name:"OrderInfo",mixins:[g.a],components:{XHeader:r.a,Group:c.a,Cell:h.a,Grid:l.a,GridItem:u.a,Previewer:d.a,XButton:p.a},data:function(){return{cid:"",checkData:"",currentPoint:"",showImgFile:[],options:{saveImg:function(t){console.log(123)}}}},filters:{picUrl:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return api50+"/api/v1/File/DownLoadPic?filePath="+t+"&w="+a+"&h="+e}},mounted:function(){var t=this;this.cid=this.$route.query.cid,this.getCheckDetail(this.cid),this.$route.query.backIndex&&1==this.$route.query.backIndex?document.addEventListener("plusready",function(){t.getLocation(),plus.key.removeEventListener("backbutton",function(){}),plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview();plus.webview.close(t)})}):this.getLocation()},methods:{back:function(){if(this.$route.query.backIndex&&1==this.$route.query.backIndex){var t=plus.webview.currentWebview();plus.webview.close(t)}else this.$router.back()},gotoMap:function(){var t=f.bd_decrypt(this.checkData.MapLat,this.checkData.MapLng),a=f.gcj_decrypt(t.lat,t.lng),e=new plus.maps.Point(a.lng,a.lat),n=new plus.maps.Point(this.currentPoint.coords.longitude,this.currentPoint.coords.latitude);plus.maps.openSysMap(e,"目的地",n)},showMap:function(){var t=new BMap.Map("container"),a=new BMap.Point(this.checkData.MapLng,this.checkData.MapLat),e=new BMap.Marker(a),n=new BMap.Circle(a,500,{strokeColor:"red",strokeWeight:1,strokeOpacity:.3});t.addOverlay(e),t.addOverlay(n),t.centerAndZoom(a,15)},setMap:function(t){this.currentPoint=t},getCheckDetail:function(t){var a=this,e="/Work/GetCrmWorkSigninInfo/"+t;this.Axios.get(e).then(function(t){a.checkData=t.data.Data,a.showImgFile=[];for(var e=0;e<a.checkData.ImageAttach.length;e++){var n=a.checkData.ImageAttach[e];a.showImgFile.push({src:api50+"/api/v1/File/DownLoadPic?filePath="+n.FilePath})}a.showMap()})},imgShow:function(t){this.showImgFile.length>0&&this.$refs.previewer.show(t)},geoLngLatToBaidu:function(t,a,e){var n="http://api.map.baidu.com/geoconv/v1/?coords="+t+","+a+"&output=json&from="+("gcj02"==e?3:1)+"&to=5&ak=W6WIQmkWMM7fHZ1bQzONDGwimUikfaPU";return new o.a(function(t,a){jsonp(n,null,function(a,e){a?console.error(a.message):e&&0==e.status&&t({lng:e.result[0].x,lat:e.result[0].y})})})},geoDeCoder:function(t,a,e){var n="http://api.map.baidu.com/geocoder/v2/?coordtype=wgs84&location="+t+","+a+"&latest_admin=1&output=json&ak=W6WIQmkWMM7fHZ1bQzONDGwimUikfaPU";return new o.a(function(t,a){jsonp(n,null,function(a,e){a?console.error(a.message):e&&0==e.status&&t({country:e.result.addressComponent.country||"",province:e.result.addressComponent.province||"",city:e.result.addressComponent.city||"",district:e.result.addressComponent.district||"",address:e.result.addressComponent.street||"",street:e.result.sematic_description||""})})})},getLocation:function(){var t=this,a={coords:{},address:{}};"iOS"==plus.os.name?plus.geolocation.getCurrentPosition(function(e){t.geoLngLatToBaidu(e.coords.longitude,e.coords.latitude,e.coordsType).then(function(e){a.coords.longitude=e.lng,a.coords.latitude=e.lat,t.geoDeCoder(e.lat,e.lng).then(function(e){a.address=e,t.setMap(a)}).catch(function(t){console.log(i()(a))})})},function(t){alert("定位失败，请检查网络"),console.log(i()(t))}):plus.geolocation.getCurrentPosition(function(a){a.address.address=a.address.street,t.setMap(a)},function(t){alert("定位失败，请检查网络"),console.log(i()(t))},{provider:"baidu",geocode:!0,coordsType:"bd09ll"})}}}),M={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"check-info"},[e("x-header",{attrs:{title:"记录详情","left-options":{backText:"",preventGoBack:!0}},on:{"on-click-back":t.back}}),t._v(" "),e("div",{staticClass:"content"},[e("group",{attrs:{title:"记录信息"}},[e("div",{attrs:{id:"container"}}),t._v(" "),e("cell",{attrs:{title:"记录时间",value:t.checkData.SigninTime}}),t._v(" "),e("cell",{attrs:{primary:"content",title:"记录地点"}},[e("span",{staticClass:"show-text"},[t._v(t._s(t.checkData.Address))])]),t._v(" "),e("cell",{attrs:{primary:"content",title:"客户"}},[e("span",{staticClass:"show-text"},[t._v(t._s(t.checkData.CustomerName))])])],1),t._v(" "),e("group",{directives:[{name:"show",rawName:"v-show",value:t.checkData.ImageAttach&&t.checkData.ImageAttach.length>0,expression:"checkData.ImageAttach&&checkData.ImageAttach.length > 0"}],attrs:{title:"记录图片"}},[e("div",{staticClass:"updatePic"},t._l(t.checkData.ImageAttach,function(a,n){return e("div",{key:n,staticClass:"picBoxWrap"},[e("div",{staticClass:"picBox"},[e("img",{attrs:{src:t._f("picUrl")(a.FilePath)},on:{click:function(a){t.imgShowPic(n)}}})])])}))]),t._v(" "),e("group",{staticStyle:{padding:"10px 20px"}},[e("x-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return t.gotoMap(a)}}},[t._v("导航到此处")])],1)],1),t._v(" "),e("previewer",{ref:"previewer",attrs:{list:t.showImgFile,options:t.options},on:{"on-close":t.closePic}})],1)},staticRenderFns:[]};var m=e("VU/8")(v,M,!1,function(t){e("0g3g")},"data-v-6febf45a",null);a.default=m.exports}});
//# sourceMappingURL=50.1138a48c01d55fd29c6f.js.map